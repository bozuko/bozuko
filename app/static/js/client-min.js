window.undefined=window.undefined,Ext={version:"3.1.0"},Ext.apply=function(e,t,n){n&&Ext.apply(e,n);if(e&&t&&typeof t=="object")for(var r in t)e[r]=t[r];return e},function(){var e=0,t=Object.prototype.toString,n=navigator.userAgent.toLowerCase(),r=function(e){return e.test(n)},i=document,s=i.compatMode=="CSS1Compat",o=r(/opera/),u=r(/chrome/),a=r(/webkit/),f=!u&&r(/safari/),l=f&&r(/applewebkit\/4/),c=f&&r(/version\/3/),h=f&&r(/version\/4/),p=!o&&r(/msie/),d=p&&r(/msie 7/),v=p&&r(/msie 8/),m=p&&!d&&!v,g=!a&&r(/gecko/),y=g&&r(/rv:1\.8/),b=g&&r(/rv:1\.9/),w=p&&!s,E=r(/windows|win32/),S=r(/macintosh|mac os x/),x=r(/adobeair/),T=r(/linux/),N=/^https/i.test(window.location.protocol);if(m)try{i.execCommand("BackgroundImageCache",!1,!0)}catch(C){}Ext.apply(Ext,{SSL_SECURE_URL:N&&p?'javascript:""':"about:blank",isStrict:s,isSecure:N,isReady:!1,enableGarbageCollector:!0,enableListenerCollection:!1,enableNestedListenerRemoval:!1,USE_NATIVE_JSON:!1,applyIf:function(e,t){if(e)for(var n in t)Ext.isDefined(e[n])||(e[n]=t[n]);return e},id:function(t,n){return(t=Ext.getDom(t)||{}).id=t.id||(n||"ext-gen")+ ++e},extend:function(){var e=function(e){for(var t in e)this[t]=e[t]},t=Object.prototype.constructor;return function(n,r,i){Ext.isObject(r)&&(i=r,r=n,n=i.constructor!=t?i.constructor:function(){r.apply(this,arguments)});var s=function(){},o,u=r.prototype;return s.prototype=u,o=n.prototype=new s,o.constructor=n,n.superclass=u,u.constructor==t&&(u.constructor=r),n.override=function(e){Ext.override(n,e)},o.superclass=o.supr=function(){return u},o.override=e,Ext.override(n,i),n.extend=function(e){return Ext.extend(n,e)},n}}(),override:function(e,t){if(t){var n=e.prototype;Ext.apply(n,t),Ext.isIE&&t.hasOwnProperty("toString")&&(n.toString=t.toString)}},namespace:function(){var e,t;return Ext.each(arguments,function(n){t=n.split("."),e=window[t[0]]=window[t[0]]||{},Ext.each(t.slice(1),function(t){e=e[t]=e[t]||{}})}),e},urlEncode:function(e,t){var n,r=[],i=encodeURIComponent;return Ext.iterate(e,function(e,t){n=Ext.isEmpty(t),Ext.each(n?e:t,function(t){r.push("&",i(e),"=",!Ext.isEmpty(t)&&(t!=e||!n)?Ext.isDate(t)?Ext.encode(t).replace(/"/g,""):i(t):"")})}),t||(r.shift(),t=""),t+r.join("")},urlDecode:function(e,t){if(Ext.isEmpty(e))return{};var n={},r=e.split("&"),i=decodeURIComponent,s,o;return Ext.each(r,function(e){e=e.split("="),s=i(e[0]),o=i(e[1]),n[s]=t||!n[s]?o:[].concat(n[s]).concat(o)}),n},urlAppend:function(e,t){return Ext.isEmpty(t)?e:e+(e.indexOf("?")===-1?"?":"&")+t},toArray:function(){return p?function(e,t,n,r){r=[];for(var i=0,s=e.length;i<s;i++)r.push(e[i]);return r.slice(t||0,n||r.length)}:function(e,t,n){return Array.prototype.slice.call(e,t||0,n||e.length)}}(),isIterable:function(e){return Ext.isArray(e)||e.callee?!0:/NodeList|HTMLCollection/.test(t.call(e))?!0:(typeof e.nextNode!="undefined"||e.item)&&Ext.isNumber(e.length)},each:function(e,t,n){if(Ext.isEmpty(e,!0))return;if(!Ext.isIterable(e)||Ext.isPrimitive(e))e=[e];for(var r=0,i=e.length;r<i;r++)if(t.call(n||e[r],e[r],r,e)===!1)return r},iterate:function(e,t,n){if(Ext.isEmpty(e))return;if(Ext.isIterable(e)){Ext.each(e,t,n);return}if(Ext.isObject(e))for(var r in e)if(e.hasOwnProperty(r)&&t.call(n||e,r,e[r],e)===!1)return},getDom:function(e){return!e||!i?null:e.dom?e.dom:Ext.isString(e)?i.getElementById(e):e},getBody:function(){return Ext.get(i.body||i.documentElement)},removeNode:p&&!v?function(){var e;return function(t){t&&t.tagName!="BODY"&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(t,!0):Ext.EventManager.removeAll(t),e=e||i.createElement("div"),e.appendChild(t),e.innerHTML="",delete Ext.elCache[t.id])}}():function(e){e&&e.parentNode&&e.tagName!="BODY"&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(e,!0):Ext.EventManager.removeAll(e),e.parentNode.removeChild(e),delete Ext.elCache[e.id])},isEmpty:function(e,t){return e===null||e===undefined||Ext.isArray(e)&&!e.length||(t?!1:e==="")},isArray:function(e){return t.apply(e)==="[object Array]"},isDate:function(e){return t.apply(e)==="[object Date]"},isObject:function(e){return!!e&&Object.prototype.toString.call(e)==="[object Object]"},isPrimitive:function(e){return Ext.isString(e)||Ext.isNumber(e)||Ext.isBoolean(e)},isFunction:function(e){return t.apply(e)==="[object Function]"},isNumber:function(e){return typeof e=="number"&&isFinite(e)},isString:function(e){return typeof e=="string"},isBoolean:function(e){return typeof e=="boolean"},isElement:function(e){return!!e&&e.tagName},isDefined:function(e){return typeof e!="undefined"},isOpera:o,isWebKit:a,isChrome:u,isSafari:f,isSafari3:c,isSafari4:h,isSafari2:l,isIE:p,isIE6:m,isIE7:d,isIE8:v,isGecko:g,isGecko2:y,isGecko3:b,isBorderBox:w,isLinux:T,isWindows:E,isMac:S,isAir:x}),Ext.ns=Ext.namespace}(),Ext.ns("Ext.util","Ext.lib","Ext.data"),Ext.elCache={},Ext.apply(Function.prototype,{createInterceptor:function(e,t){var n=this;return Ext.isFunction(e)?function(){var r=this,i=arguments;return e.target=r,e.method=n,e.apply(t||r||window,i)!==!1?n.apply(r||window,i):null}:this},createCallback:function(){var e=arguments,t=this;return function(){return t.apply(window,e)}},createDelegate:function(e,t,n){var r=this;return function(){var i=t||arguments;if(n===!0)i=Array.prototype.slice.call(arguments,0),i=i.concat(t);else if(Ext.isNumber(n)){i=Array.prototype.slice.call(arguments,0);var s=[n,0].concat(t);Array.prototype.splice.apply(i,s)}return r.apply(e||window,i)}},defer:function(e,t,n,r){var i=this.createDelegate(t,n,r);return e>0?setTimeout(i,e):(i(),0)}}),Ext.applyIf(String,{format:function(e){var t=Ext.toArray(arguments,1);return e.replace(/\{(\d+)\}/g,function(e,n){return t[n]})}}),Ext.applyIf(Array.prototype,{indexOf:function(e,t){var n=this.length;t=t||0,t+=t<0?n:0;for(;t<n;++t)if(this[t]===e)return t;return-1},remove:function(e){var t=this.indexOf(e);return t!=-1&&this.splice(t,1),this}}),Ext.util.TaskRunner=function(e){e=e||10;var t=[],n=[],r=0,i=!1,s=function(){i=!1,clearInterval(r),r=0},o=function(){i||(i=!0,r=setInterval(a,e))},u=function(e){n.push(e),e.onStop&&e.onStop.apply(e.scope||e)},a=function(){var e=n.length,r=(new Date).getTime();if(e>0){for(var i=0;i<e;i++)t.remove(n[i]);n=[];if(t.length<1){s();return}}for(var i=0,o,a,f,l=t.length;i<l;++i){o=t[i],a=r-o.taskRunTime;if(o.interval<=a){f=o.run.apply(o.scope||o,o.args||[++o.taskRunCount]),o.taskRunTime=r;if(f===!1||o.taskRunCount===o.repeat){u(o);return}}o.duration&&o.duration<=r-o.taskStartTime&&u(o)}};this.start=function(e){return t.push(e),e.taskStartTime=(new Date).getTime(),e.taskRunTime=0,e.taskRunCount=0,o(),e},this.stop=function(e){return u(e),e},this.stopAll=function(){s();for(var e=0,r=t.length;e<r;e++)t[e].onStop&&t[e].onStop();t=[],n=[]}},Ext.TaskMgr=new Ext.util.TaskRunner,Ext.util.DelayedTask=function(e,t,n){var r=this,i,s=function(){clearInterval(i),i=null,e.apply(t,n||[])};r.delay=function(o,u,f,l){r.cancel(),e=u||e,t=f||t,n=l||n,i=setInterval(s,o)},r.cancel=function(){i&&(clearInterval(i),i=null)}},function(){function t(t){return e||(e=new Ext.Element.Flyweight),e.dom=t,e}var e;(function(){var e=document,n=e.compatMode=="CSS1Compat",r=Math.max,i=Math.round,s=parseInt;Ext.lib.Dom={isAncestor:function(e,t){var n=!1;e=Ext.getDom(e),t=Ext.getDom(t);if(e&&t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return!!(e.compareDocumentPosition(t)&16);while(t=t.parentNode)n=t==e||n}return n},getViewWidth:function(e){return e?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:function(e){return e?this.getDocumentHeight():this.getViewportHeight()},getDocumentHeight:function(){return r(n?e.documentElement.scrollHeight:e.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return r(n?e.documentElement.scrollWidth:e.body.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return Ext.isIE?Ext.isStrict?e.documentElement.clientHeight:e.body.clientHeight:self.innerHeight},getViewportWidth:function(){return!Ext.isStrict&&!Ext.isOpera?e.body.clientWidth:Ext.isIE?e.documentElement.clientWidth:self.innerWidth},getY:function(e){return this.getXY(e)[1]},getX:function(e){return this.getXY(e)[0]},getXY:function(n){var r,o,u,a,f,l,p=0,v=0,m,g,y=e.body||e.documentElement,b=[0,0];n=Ext.getDom(n);if(n!=y)if(n.getBoundingClientRect)u=n.getBoundingClientRect(),m=t(document).getScroll(),b=[i(u.left+m.left),i(u.top+m.top)];else{r=n,g=t(n).isStyle("position","absolute");while(r)o=t(r),p+=r.offsetLeft,v+=r.offsetTop,g=g||o.isStyle("position","absolute"),Ext.isGecko&&(v+=a=s(o.getStyle("borderTopWidth"),10)||0,p+=f=s(o.getStyle("borderLeftWidth"),10)||0,r!=n&&!o.isStyle("overflow","visible")&&(p+=f,v+=a)),r=r.offsetParent;Ext.isSafari&&g&&(p-=y.offsetLeft,v-=y.offsetTop),Ext.isGecko&&!g&&(l=t(y),p+=s(l.getStyle("borderLeftWidth"),10)||0,v+=s(l.getStyle("borderTopWidth"),10)||0),r=n.parentNode;while(r&&r!=y){if(!Ext.isOpera||r.tagName!="TR"&&!t(r).isStyle("display","inline"))p-=r.scrollLeft,v-=r.scrollTop;r=r.parentNode}b=[p,v]}return b},setXY:function(e,t){(e=Ext.fly(e,"_setXY")).position();var n=e.translatePoints(t),r=e.dom.style,i;for(i in n)isNaN(n[i])||(r[i]=n[i]+"px")},setX:function(e,t){this.setXY(e,[t,!1])},setY:function(e,t){this.setXY(e,[!1,t])}}})(),Ext.lib.Event=function(){function x(e){return!T(e.currentTarget,A.getRelatedTarget(e))}function T(e,t){if(e&&e.firstChild)while(t){if(t===e)return!0;t=t.parentNode,t&&t.nodeType!=1&&(t=null)}return!1}function N(){var t=!1,o=[],a,f,l,c,h=!e||n>0;if(!s){s=!0;for(f=0,l=r.length;f<l;f++)c=r[f],c&&(a=u.getElementById(c.id))&&(!c.checkReady||e||a.nextSibling||u&&u.body?(a=c.override?c.override===!0?c.obj:c.override:a,c.fn.call(a,c.obj),r.remove(c)):o.push(c));n=o.length===0?0:n-1,h?C():(clearInterval(i),i=null),t=!(s=!1)}return t}function C(){if(!i){var e=function(){N()};i=setInterval(e,f)}}function k(){var e=u.documentElement,t=u.body;return e&&(e[g]||e[m])?[e[m],e[g]]:t?[t[m],t[g]]:[0,0]}function L(e,t){e=e.browserEvent||e;var n=e["page"+t];return!n&&n!==0&&(n=e["client"+t]||0,Ext.isIE&&(n+=k()[t=="X"?0:1])),n}var e=!1,t={},n=0,r=[],i,s=!1,o=window,u=document,a=200,f=20,l=0,c=0,h=1,p=2,d=2,v=3,m="scrollLeft",g="scrollTop",y="unload",b="mouseover",w="mouseout",E=function(){var e;return o.addEventListener?e=function(e,t,n,r){return t=="mouseenter"?(n=n.createInterceptor(x),e.addEventListener(b,n,r)):t=="mouseleave"?(n=n.createInterceptor(x),e.addEventListener(w,n,r)):e.addEventListener(t,n,r),n}:o.attachEvent?e=function(e,t,n,r){return e.attachEvent("on"+t,n),n}:e=function(){},e}(),S=function(){var e;return o.removeEventListener?e=function(e,t,n,r){t=="mouseenter"?t=b:t=="mouseleave"&&(t=w),e.removeEventListener(t,n,r)}:o.detachEvent?e=function(e,t,n){e.detachEvent("on"+t,n)}:e=function(){},e}(),A={extAdapter:!0,onAvailable:function(e,t,i,s){r.push({id:e,fn:t,obj:i,override:s,checkReady:!1}),n=a,C()},addListener:function(e,n,r){return e=Ext.getDom(e),e&&r?n==y?(t[e.id]===undefined&&(t[e.id]=[]),t[e.id].push([n,r]),r):E(e,n,r,!1):!1},removeListener:function(e,n,r){e=Ext.getDom(e);var i,s,o,u;if(e&&r){if(n==y){if((u=t[e.id])!==undefined)for(i=0,s=u.length;i<s;i++)(o=u[i])&&o[c]==n&&o[h]==r&&t[id].splice(i,1);return}S(e,n,r,!1)}},getTarget:function(e){return e=e.browserEvent||e,this.resolveTextNode(e.target||e.srcElement)},resolveTextNode:Ext.isGecko?function(e){if(!e)return;var t=HTMLElement.prototype.toString.call(e);if(t=="[xpconnect wrapped native prototype]"||t=="[object XULElement]")return;return e.nodeType==3?e.parentNode:e}:function(e){return e&&e.nodeType==3?e.parentNode:e},getRelatedTarget:function(e){return e=e.browserEvent||e,this.resolveTextNode(e.relatedTarget||(e.type==w?e.toElement:e.type==b?e.fromElement:null))},getPageX:function(e){return L(e,"X")},getPageY:function(e){return L(e,"Y")},getXY:function(e){return[this.getPageX(e),this.getPageY(e)]},stopEvent:function(e){this.stopPropagation(e),this.preventDefault(e)},stopPropagation:function(e){e=e.browserEvent||e,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e=e.browserEvent||e,e.preventDefault?e.preventDefault():e.returnValue=!1},getEvent:function(e){e=e||o.event;if(!e){var t=this.getEvent.caller;while(t){e=t.arguments[0];if(e&&Event==e.constructor)break;t=t.caller}}return e},getCharCode:function(e){return e=e.browserEvent||e,e.charCode||e.keyCode||0},getListeners:function(e,t){Ext.EventManager.getListeners(e,t)},purgeElement:function(e,t,n){Ext.EventManager.purgeElement(e,t,n)},_load:function(t){e=!0;var n=Ext.lib.Event;Ext.isIE&&t!==!0&&S(o,"load",arguments.callee)},_unload:function(e){var n=Ext.lib.Event,r,i,s,u,a,f,l,c,p;for(f in t){a=t[f];for(r=0,l=a.length;r<l;r++){u=a[r];if(u)try{p=u[v]?u[v]===!0?u[d]:u[v]:o,u[h].call(p,n.getEvent(e),u[d])}catch(m){}}}t=null,Ext.EventManager._unload(),S(o,y,n._unload)}};return A.on=A.addListener,A.un=A.removeListener,u&&u.body?A._load(!0):E(o,"load",A._load),E(o,y,A._unload),N(),A}(),Ext.lib.Ajax=function(){function n(e){function r(e,t){for(n in t)t.hasOwnProperty(n)&&e.setRequestHeader(n,t[n])}var t=e.conn,n;h.defaultHeaders&&r(t,h.defaultHeaders),h.headers&&(r(t,h.headers),delete h.headers)}function r(e,t,n,r){return{tId:e,status:n?-1:0,statusText:n?"transaction aborted":"communication failure",isAbort:n,isTimeout:r,argument:t}}function i(e,t){(h.headers=h.headers||{})[e]=t}function s(e,t){var n={},r,i=e.conn,s,o;try{r=e.conn.getAllResponseHeaders(),Ext.each(r.replace(/\r\n/g,"\n").split("\n"),function(e){s=e.indexOf(":"),s>=0&&(o=e.substr(0,s).toLowerCase(),e.charAt(s+1)==" "&&++s,n[o]=e.substr(s+1))})}catch(u){}return{tId:e.tId,status:i.status,statusText:i.statusText,getResponseHeader:function(e){return n[e.toLowerCase()]},getAllResponseHeaders:function(){return r},responseText:i.responseText,responseXML:i.responseXML,argument:t}}function o(e){e.conn=null,e=null}function u(e,t,n,i){if(!t){o(e);return}var u,a;try{e.conn.status!==undefined&&e.conn.status!=0?u=e.conn.status:u=13030}catch(f){u=13030}if(u>=200&&u<300||Ext.isIE&&u==1223)a=s(e,t.argument),t.success&&(t.scope?t.success.apply(t.scope,[a]):t.success(a));else switch(u){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:a=r(e.tId,t.argument,n?n:!1,i),t.failure&&(t.scope?t.failure.apply(t.scope,[a]):t.failure(a));break;default:a=s(e,t.argument),t.failure&&(t.scope?t.failure.apply(t.scope,[a]):t.failure(a))}o(e),a=null}function a(e,t){t=t||{};var n=e.conn,r=e.tId,i=h.poll,s=t.timeout||null;s&&(h.timeout[r]=setTimeout(function(){h.abort(e,t,!0)},s)),i[r]=setInterval(function(){n&&n.readyState==4&&(clearInterval(i[r]),i[r]=null,s&&(clearTimeout(h.timeout[r]),h.timeout[r]=null),u(e,t))},h.pollInterval)}function f(e,r,s,o){var u=l()||null;return u&&(u.conn.open(e,r,!0),h.useDefaultXhrHeader&&i("X-Requested-With",h.defaultXhrHeader),o&&h.useDefaultHeader&&(!h.headers||!h.headers[t])&&i(t,h.defaultPostHeader),(h.defaultHeaders||h.headers)&&n(u),a(u,s),u.conn.send(o||null)),u}function l(){var e;try{(e=c(h.transactionId))&&h.transactionId++}catch(t){}finally{return e}}function c(t){var n;try{n=new XMLHttpRequest}catch(r){for(var i=0;i<e.length;++i)try{n=new ActiveXObject(e[i]);break}catch(r){}}finally{return{conn:n,tId:t}}}var e=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t="Content-Type",h={request:function(e,n,r,s,o){if(o){var u=this,a=o.xmlData,l=o.jsonData,c;Ext.applyIf(u,o);if(a||l)c=u.headers,(!c||!c[t])&&i(t,a?"text/xml":"application/json"),s=a||(Ext.isPrimitive(l)?l:Ext.encode(l))}return f(e||o.method||"POST",n,r,s)},serializeForm:function(e){var t=e.elements||(document.forms[e]||Ext.getDom(e)).elements,n=!1,r=encodeURIComponent,i,s,o,u,a="",f;return Ext.each(t,function(e){o=e.name,f=e.type,!e.disabled&&o&&(/select-(one|multiple)/i.test(f)?Ext.each(e.options,function(e){e.selected&&(a+=String.format("{0}={1}&",r(o),r((e.hasAttribute?e.hasAttribute("value"):e.getAttribute("value")!==null)?e.value:e.text)))}):/file|undefined|reset|button/i.test(f)||(!/radio|checkbox/i.test(f)||!!e.checked)&&(f!="submit"||!n)&&(a+=r(o)+"="+r(e.value)+"&",n=/submit/i.test(f)))}),a.substr(0,a.length-1)},useDefaultHeader:!0,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest",poll:{},timeout:{},pollInterval:50,transactionId:0,abort:function(e,t,n){var r=this,i=e.tId,s=!1;return r.isCallInProgress(e)&&(e.conn.abort(),clearInterval(r.poll[i]),r.poll[i]=null,clearTimeout(h.timeout[i]),r.timeout[i]=null,u(e,t,s=!0,n)),s},isCallInProgress:function(e){return e.conn&&!{0:!0,4:!0}[e.conn.readyState]}};return h}(),function(){var e=Ext.lib,t=/width|height|opacity|padding/i,n=/^((width|height)|(top|left))$/,r=/width|height|top$|bottom$|left$|right$/i,i=/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i,s=function(e){return typeof e!="undefined"},o=function(){return new Date};e.Anim={motion:function(e,t,n,r,i,s){return this.run(e,t,n,r,i,s,Ext.lib.Motion)},run:function(e,t,n,r,i,s,o){o=o||Ext.lib.AnimBase,typeof r=="string"&&(r=Ext.lib.Easing[r]);var u=new o(e,t,n,r);return u.animateX(function(){Ext.isFunction(i)&&i.call(s)}),u}},e.AnimBase=function(e,t,n,r){e&&this.init(e,t,n,r)},e.AnimBase.prototype={doMethod:function(e,t,n){var r=this;return r.method(r.curFrame,t,n-t,r.totalFrames)},setAttr:function(e,n,r){t.test(e)&&n<0&&(n=0),Ext.fly(this.el,"_anim").setStyle(e,n+r)},getAttr:function(e){var t=Ext.fly(this.el),r=t.getStyle(e),s=n.exec(e)||[];return r!=="auto"&&!i.test(r)?parseFloat(r):!!s[2]||t.getStyle("position")=="absolute"&&!!s[3]?t.dom["offset"+s[0].charAt(0).toUpperCase()+s[0].substr(1)]:0},getDefaultUnit:function(e){return r.test(e)?"px":""},animateX:function(e,t){var n=this,r=function(){n.onComplete.removeListener(r),Ext.isFunction(e)&&e.call(t||n,n)};n.onComplete.addListener(r,n),n.animate()},setRunAttr:function(e){var t=this,n=this.attributes[e],r=n.to,i=n.by,o=n.from,u=n.unit,a=this.runAttrs[e]={},f;if(!s(r)&&!s(i))return!1;var l=s(o)?o:t.getAttr(e);if(s(r))f=r;else if(s(i))if(Ext.isArray(l)){f=[];for(var c=0,h=l.length;c<h;c++)f[c]=l[c]+i[c]}else f=l+i;Ext.apply(a,{start:l,end:f,unit:s(u)?u:t.getDefaultUnit(e)})},init:function(t,n,r,i){var s=this,u=0,a=e.AnimMgr;Ext.apply(s,{isAnimated:!1,startTime:null,el:Ext.getDom(t),attributes:n||{},duration:r||1,method:i||e.Easing.easeNone,useSec:!0,curFrame:0,totalFrames:a.fps,runAttrs:{},animate:function(){var e=this,t=e.duration;if(e.isAnimated)return!1;e.curFrame=0,e.totalFrames=e.useSec?Math.ceil(a.fps*t):t,a.registerElement(e)},stop:function(e){var t=this;e&&(t.curFrame=t.totalFrames,t._onTween.fire()),a.stop(t)}});var f=function(){var e=this,t;e.onStart.fire(),e.runAttrs={};for(t in this.attributes)this.setRunAttr(t);e.isAnimated=!0,e.startTime=o(),u=0},l=function(){var e=this;e.onTween.fire({duration:o()-e.startTime,curFrame:e.curFrame});var t=e.runAttrs;for(var n in t)this.setAttr(n,e.doMethod(n,t[n].start,t[n].end),t[n].unit);++u},c=function(){var e=this,t=(o()-e.startTime)/1e3,n={duration:t,frames:u,fps:u/t};e.isAnimated=!1,u=0,e.onComplete.fire(n)};s.onStart=new Ext.util.Event(s),s.onTween=new Ext.util.Event(s),s.onComplete=new Ext.util.Event(s),(s._onStart=new Ext.util.Event(s)).addListener(f),(s._onTween=new Ext.util.Event(s)).addListener(l),(s._onComplete=new Ext.util.Event(s)).addListener(c)}},Ext.lib.AnimMgr=new function(){var e=this,t=null,n=[],r=0;Ext.apply(e,{fps:1e3,delay:1,registerElement:function(t){n.push(t),++r,t._onStart.fire(),e.start()},unRegister:function(t,s){t._onComplete.fire(),s=s||i(t),s!=-1&&n.splice(s,1),--r<=0&&e.stop()},start:function(){t===null&&(t=setInterval(e.run,e.delay))},stop:function(i){if(!i){clearInterval(t);for(var s=0,o=n.length;s<o;++s)n[0].isAnimated&&e.unRegister(n[0],0);n=[],t=null,r=0}else e.unRegister(i)},run:function(){var t,r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r],o&&o.isAnimated&&(t=o.totalFrames,o.curFrame<t||t===null?(++o.curFrame,o.useSec&&s(o),o._onTween.fire()):e.stop(o))}});var i=function(e){var t,r;for(t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1},s=function(e){var t=e.totalFrames,n=e.curFrame,r=e.duration,i=n*r*1e3/t,s=o()-e.startTime,u=0;s<r*1e3?u=Math.round((s/i-1)*n):u=t-(n+1),u>0&&isFinite(u)&&(e.curFrame+u>=t&&(u=t-(n+1)),e.curFrame+=u)}},e.Bezier=new function(){this.getPosition=function(e,t){var n=e.length,r=[],i=1-t,s,o;for(s=0;s<n;++s)r[s]=[e[s][0],e[s][1]];for(o=1;o<n;++o)for(s=0;s<n-o;++s)r[s][0]=i*r[s][0]+t*r[parseInt(s+1,10)][0],r[s][1]=i*r[s][1]+t*r[parseInt(s+1,10)][1];return[r[0][0],r[0][1]]}},e.Easing={easeNone:function(e,t,n,r){return n*e/r+t},easeIn:function(e,t,n,r){return n*(e/=r)*e+t},easeOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t}},function(){e.Motion=function(t,n,r,i){t&&e.Motion.superclass.constructor.call(this,t,n,r,i)},Ext.extend(e.Motion,Ext.lib.AnimBase);var t=e.Motion.superclass,n=e.Motion.prototype,r=/^points$/i;Ext.apply(e.Motion.prototype,{setAttr:function(e,n,i){var s=this,o=t.setAttr;r.test(e)?(i=i||"px",o.call(s,"left",n[0],i),o.call(s,"top",n[1],i)):o.call(s,e,n,i)},getAttr:function(e){var n=this,i=t.getAttr;return r.test(e)?[i.call(n,"left"),i.call(n,"top")]:i.call(n,e)},doMethod:function(n,i,s){var o=this;return r.test(n)?e.Bezier.getPosition(o.runAttrs[n],o.method(o.curFrame,0,100,o.totalFrames)/100):t.doMethod.call(o,n,i,s)},setRunAttr:function(n){if(r.test(n)){var o=this,u=this.el,a=this.attributes.points,f=a.control||[],c=a.from,p=a.to,d=a.by,v=e.Dom,g,y,b,w,E;f.length>0&&!Ext.isArray(f[0])&&(f=[f]),Ext.fly(u,"_anim").position(),v.setXY(u,s(c)?c:v.getXY(u)),g=o.getAttr("points");if(s(p)){b=i.call(o,p,g);for(y=0,w=f.length;y<w;++y)f[y]=i.call(o,f[y],g)}else if(s(d)){b=[g[0]+d[0],g[1]+d[1]];for(y=0,w=f.length;y<w;++y)f[y]=[g[0]+f[y][0],g[1]+f[y][1]]}E=this.runAttrs[n]=[g],f.length>0&&(E=E.concat(f)),E[E.length]=b}else t.setRunAttr.call(this,n)}});var i=function(t,n){var r=e.Dom.getXY(this.el);return[t[0]-r[0]+n[0],t[1]-r[1]+n[1]]}}()}(),function(){var e=Math.abs,t=Math.PI,n=Math.asin,r=Math.pow,i=Math.sin,s=Ext.lib;Ext.apply(s.Easing,{easeBoth:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInStrong:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutStrong:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeBothStrong:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},elasticIn:function(s,o,u,a,f,l){if(s==0||(s/=a)==1)return s==0?o:o+u;l=l||a*.3;var c;return f>=e(u)?c=l/(2*t)*n(u/f):(f=u,c=l/4),-(f*r(2,10*(s-=1))*i((s*a-c)*2*t/l))+o},elasticOut:function(s,o,u,a,f,l){if(s==0||(s/=a)==1)return s==0?o:o+u;l=l||a*.3;var c;return f>=e(u)?c=l/(2*t)*n(u/f):(f=u,c=l/4),f*r(2,-10*s)*i((s*a-c)*2*t/l)+u+o},elasticBoth:function(s,o,u,a,f,l){if(s==0||(s/=a/2)==2)return s==0?o:o+u;l=l||a*.3*1.5;var c;return f>=e(u)?c=l/(2*t)*n(u/f):(f=u,c=l/4),s<1?-0.5*f*r(2,10*(s-=1))*i((s*a-c)*2*t/l)+o:f*r(2,-10*(s-=1))*i((s*a-c)*2*t/l)*.5+u+o},backIn:function(e,t,n,r,i){return i=i||1.70158,n*(e/=r)*e*((i+1)*e-i)+t},backOut:function(e,t,n,r,i){return i||(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},backBoth:function(e,t,n,r,i){return i=i||1.70158,(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},bounceIn:function(e,t,n,r){return n-s.Easing.bounceOut(r-e,0,n,r)+t},bounceOut:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},bounceBoth:function(e,t,n,r){return e<r/2?s.Easing.bounceIn(e*2,0,n,r)*.5+t:s.Easing.bounceOut(e*2-r,0,n,r)*.5+n*.5+t}})}(),function(){function a(e){var t=parseInt,n,r=null,u;return e.length==3?e:(Ext.each([s,i,o],function(i,s){n=s%2==0?16:10,u=i.exec(e);if(u&&u.length==4)return r=[t(u[1],n),t(u[2],n),t(u[3],n)],!1}),r)}var e=Ext.lib;e.Anim.color=function(t,n,r,i,s,o){return e.Anim.run(t,n,r,i,s,o,e.ColorAnim)},e.ColorAnim=function(t,n,r,i){e.ColorAnim.superclass.constructor.call(this,t,n,r,i)},Ext.extend(e.ColorAnim,e.AnimBase);var t=e.ColorAnim.superclass,n=/color$/i,r=/^transparent|rgba\(0, 0, 0, 0\)$/,i=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,s=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,o=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,u=function(e){return typeof e!="undefined"};Ext.apply(e.ColorAnim.prototype,{getAttr:function(e){var i=this,s=i.el,o;if(n.test(e))while(s&&r.test(o=Ext.fly(s).getStyle(e)))s=s.parentNode,o="fff";else o=t.getAttr.call(i,e);return o},doMethod:function(e,r,i){var s=this,o,u=Math.floor,a,f,l;if(n.test(e)){o=[];for(a=0,f=r.length;a<f;a++)l=r[a],o[a]=t.doMethod.call(s,e,l,i[a]);o="rgb("+u(o[0])+","+u(o[1])+","+u(o[2])+")"}else o=t.doMethod.call(s,e,r,i);return o},setRunAttr:function(e){var r=this,i=r.attributes[e],s=i.to,o=i.by,f;t.setRunAttr.call(r,e),f=r.runAttrs[e];if(n.test(e)){var c=a(f.start),p=a(f.end);if(!u(s)&&u(o)){p=a(o);for(var d=0,v=c.length;d<v;d++)p[d]=c[d]+p[d]}f.start=c,f.end=p}}})}(),function(){var e=Ext.lib;e.Anim.scroll=function(t,n,r,i,s,o){return e.Anim.run(t,n,r,i,s,o,e.Scroll)},e.Scroll=function(t,n,r,i){t&&e.Scroll.superclass.constructor.call(this,t,n,r,i)},Ext.extend(e.Scroll,e.ColorAnim);var t=e.Scroll.superclass,n="scroll";Ext.apply(e.Scroll.prototype,{doMethod:function(e,r,i){var s,o=this,u=o.curFrame,a=o.totalFrames;return e==n?s=[o.method(u,r[0],i[0]-r[0],a),o.method(u,r[1],i[1]-r[1],a)]:s=t.doMethod.call(o,e,r,i),s},getAttr:function(e){var r=this;return e==n?[r.el.scrollLeft,r.el.scrollTop]:t.getAttr.call(r,e)},setAttr:function(e,r,i){var s=this;e==n?(s.el.scrollLeft=r[0],s.el.scrollTop=r[1]):t.setAttr.call(s,e,r,i)}})}();if(Ext.isIE){function n(){var e=Function.prototype;delete e.createSequence,delete e.defer,delete e.createDelegate,delete e.createCallback,delete e.createInterceptor,window.detachEvent("onunload",n)}window.attachEvent("onunload",n)}}(),function(){function u(e,n,r){return function(){n.target==arguments[0]&&e.apply(r,t(arguments))}}function a(n,r,i,s){return i.task=new e.DelayedTask,function(){i.task.delay(r.buffer,n,s,t(arguments))}}function f(e,t,n,r){return function(){return t.removeListener(n,r),e.apply(r,arguments)}}function l(n,r,i,s){return function(){var o=new e.DelayedTask;i.tasks||(i.tasks=[]),i.tasks.push(o),o.delay(r.delay||10,n,s,t(arguments))}}var e=Ext.util,t=Ext.toArray,n=Ext.each,r=Ext.isObject,i=!0,s=!1;e.Observable=function(){var e=this,t=e.events;e.listeners&&(e.on(e.listeners),delete e.listeners),e.events=t||{}},e.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var e=t(arguments),n=e[0].toLowerCase(),o=this,u=i,a=o.events[n],f,l;if(o.eventsSuspended===i)(f=o.eventQueue)&&f.push(e);else if(r(a)&&a.bubble){if(a.fire.apply(a,e.slice(1))===s)return s;l=o.getBubbleTarget&&o.getBubbleTarget();if(l&&l.enableBubble)return(!l.events[n]||!Ext.isObject(l.events[n])||!l.events[n].bubble)&&l.enableBubble(n),l.fireEvent.apply(l,e)}else r(a)&&(e.shift(),u=a.fire.apply(a,e));return u},addListener:function(t,n,s,o){var u=this,a,f,l,c;if(r(t)){o=t;for(a in o)f=o[a],u.filterOptRe.test(a)||u.addListener(a,f.fn||f,f.scope||o.scope,f.fn?f:o)}else t=t.toLowerCase(),c=u.events[t]||i,Ext.isBoolean(c)&&(u.events[t]=c=new e.Event(u,t)),c.addListener(n,s,r(o)?o:{})},removeListener:function(e,t,n){var i=this.events[e.toLowerCase()];r(i)&&i.removeListener(t,n)},purgeListeners:function(){var e=this.events,t,n;for(n in e)t=e[n],r(t)&&t.clearListeners()},addEvents:function(e){var t=this;t.events=t.events||{};if(Ext.isString(e)){var n=arguments,r=n.length;while(r--)t.events[n[r]]=t.events[n[r]]||i}else Ext.applyIf(t.events,e)},hasListener:function(e){var t=this.events[e];return r(t)&&t.listeners.length>0},suspendEvents:function(e){this.eventsSuspended=i,e&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var e=this,t=e.eventQueue||[];e.eventsSuspended=s,delete e.eventQueue,n(t,function(t){e.fireEvent.apply(e,t)})}};var o=e.Observable.prototype;o.on=o.addListener,o.un=o.removeListener,e.Observable.releaseCapture=function(e){e.fireEvent=o.fireEvent},e.Event=function(e,t){this.name=t,this.obj=e,this.listeners=[]},e.Event.prototype={addListener:function(e,t,n){var r=this,i;t=t||r.obj,r.isListening(e,t)||(i=r.createListener(e,t,n),r.firing&&(r.listeners=r.listeners.slice(0)),r.listeners.push(i))},createListener:function(e,t,n){n=n||{},t=t||this.obj;var r={fn:e,scope:t,options:n},i=e;return n.target&&(i=u(i,n,t)),n.delay&&(i=l(i,n,r,t)),n.single&&(i=f(i,this,e,t)),n.buffer&&(i=a(i,n,r,t)),r.fireFn=i,r},findListener:function(e,t){var n=this.listeners,r=n.length,i,s;while(r--){i=n[r];if(i){s=i.scope;if(i.fn==e&&(s==t||s==this.obj))return r}}return-1},isListening:function(e,t){return this.findListener(e,t)!=-1},removeListener:function(e,t){var n,r,o,u=this,a=s;if((n=u.findListener(e,t))!=-1){u.firing&&(u.listeners=u.listeners.slice(0)),r=u.listeners[n],r.task&&(r.task.cancel(),delete r.task),o=r.tasks&&r.tasks.length;if(o){while(o--)r.tasks[o].cancel();delete r.tasks}u.listeners.splice(n,1),a=i}return a},clearListeners:function(){var e=this,t=e.listeners,n=t.length;while(n--)e.removeListener(t[n].fn,t[n].scope)},fire:function(){var e=this,n=t(arguments),r=e.listeners,o=r.length,u=0,a;if(o>0){e.firing=i;for(;u<o;u++){a=r[u];if(a&&a.fireFn.apply(a.scope||e.obj||window,n)===s)return e.firing=s}}return e.firing=s,i}}}(),Ext.DomHelper=function(){function d(e,t,n,i,s,o){var u=r.insertHtml(i,Ext.getDom(e),v(t));return n?Ext.get(u,!0):u}function v(e){var n="",r,i,s,o,u;if(Ext.isString(e))n=e;else if(Ext.isArray(e))for(var a=0;a<e.length;a++)e[a]&&(n+=v(e[a]));else n+="<"+(e.tag=e.tag||"div"),Ext.iterate(e,function(e,t){/tag|children|cn|html$/i.test(e)||(Ext.isObject(t)?(n+=" "+e+'="',Ext.iterate(t,function(e,t){n+=e+":"+t+";"}),n+='"'):n+=" "+({cls:"class",htmlFor:"for"}[e]||e)+'="'+t+'"')}),t.test(e.tag)?n+="/>":(n+=">",(u=e.children||e.cn)?n+=v(u):e.html&&(n+=e.html),n+="</"+e.tag+">");return n}function m(t,n,r,i){e.innerHTML=[n,r,i].join("");var s=-1,o=e,u;while(++s<t)o=o.firstChild;if(u=o.nextSibling){var a=document.createDocumentFragment();while(o)u=o.nextSibling,a.appendChild(o),o=u;o=a}return o}function g(t,n,r,d){var v,g;e=e||document.createElement("div");if(t=="td"&&(n==i||n==u)||!/td|tr|tbody/i.test(t)&&(n==o||n==s))return;g=n==o?r:n==s?r.nextSibling:n==i?r.firstChild:null;if(n==o||n==s)r=r.parentNode;return t=="td"||t=="tr"&&(n==u||n==i)?v=m(4,h,d,p):t=="tbody"&&(n==u||n==i)||t=="tr"&&(n==o||n==s)?v=m(3,l,d,c):v=m(2,a,d,f),r.insertBefore(v,g),v}var e=null,t=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,n=/^table|tbody|tr|td$/i,r,i="afterbegin",s="afterend",o="beforebegin",u="beforeend",a="<table>",f="</table>",l=a+"<tbody>",c="</tbody>"+f,h=l+"<tr>",p="</tr>"+c;return r={markup:function(e){return v(e)},applyStyles:function(e,t){if(t){var n=0,r,i;e=Ext.fly(e),Ext.isFunction(t)&&(t=t.call());if(Ext.isString(t)){t=t.trim().split(/\s*(?::|;)\s*/);for(r=t.length;n<r;)e.setStyle(t[n++],t[n++])}else Ext.isObject(t)&&e.setStyle(t)}},insertHtml:function(e,t,r){var a={},f,l,c,h,p,d;e=e.toLowerCase(),a[o]=["BeforeBegin","previousSibling"],a[s]=["AfterEnd","nextSibling"];if(!t.insertAdjacentHTML)return c=t.ownerDocument.createRange(),l="setStart"+(/end/i.test(e)?"After":"Before"),a[e]?(c[l](t),h=c.createContextualFragment(r),t.parentNode.insertBefore(h,e==o?t:t.nextSibling),t[(e==o?"previous":"next")+"Sibling"]):(p=(e==i?"first":"last")+"Child",t.firstChild?(c[l](t[p]),h=c.createContextualFragment(r),e==i?t.insertBefore(h,t.firstChild):t.appendChild(h)):t.innerHTML=r,t[p]);if(n.test(t.tagName)&&(d=g(t.tagName.toLowerCase(),e,t,r)))return d;a[i]=["AfterBegin","firstChild"],a[u]=["BeforeEnd","lastChild"];if(f=a[e])return t.insertAdjacentHTML(f[0],r),t[f[1]];throw'Illegal insertion point -> "'+e+'"'},insertBefore:function(e,t,n){return d(e,t,n,o)},insertAfter:function(e,t,n){return d(e,t,n,s,"nextSibling")},insertFirst:function(e,t,n){return d(e,t,n,i,"firstChild")},append:function(e,t,n){return d(e,t,n,u,"",!0)},overwrite:function(e,t,n){return e=Ext.getDom(e),e.innerHTML=v(t),n?Ext.get(e.firstChild):e.firstChild},createHtml:v},r}(),Ext.Template=function(e){var t=this,n=arguments,r=[];Ext.isArray(e)?e=e.join(""):n.length>1&&(Ext.each(n,function(e){Ext.isObject(e)?Ext.apply(t,e):r.push(e)}),e=r.join("")),t.html=e,t.compiled&&t.compile()},Ext.Template.prototype={re:/\{([\w-]+)\}/g,applyTemplate:function(e){var t=this;return t.compiled?t.compiled(e):t.html.replace(t.re,function(t,n){return e[n]!==undefined?e[n]:""})},set:function(e,t){var n=this;return n.html=e,n.compiled=null,t?n.compile():n},compile:function(){function fn(e,t){return t="values['"+t+"']","'"+sep+"("+t+" == undefined ? '' : "+t+")"+sep+"'"}var me=this,sep=Ext.isGecko?"+":",";return eval("this.compiled = function(values){ return "+(Ext.isGecko?"'":"['")+me.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+(Ext.isGecko?"';};":"'].join('');};")),me},insertFirst:function(e,t,n){return this.doInsert("afterBegin",e,t,n)},insertBefore:function(e,t,n){return this.doInsert("beforeBegin",e,t,n)},insertAfter:function(e,t,n){return this.doInsert("afterEnd",e,t,n)},append:function(e,t,n){return this.doInsert("beforeEnd",e,t,n)},doInsert:function(e,t,n,r){t=Ext.getDom(t);var i=Ext.DomHelper.insertHtml(e,t,this.applyTemplate(n));return r?Ext.get(i,!0):i},overwrite:function(e,t,n){return e=Ext.getDom(e),e.innerHTML=this.applyTemplate(t),n?Ext.get(e.firstChild,!0):e.firstChild}},Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate,Ext.Template.from=function(e,t){return e=Ext.getDom(e),new Ext.Template(e.value||e.innerHTML,t||"")},Ext.DomQuery=function(){function child(e,t){var n=0,r=e.firstChild;while(r){if(r.nodeType==1&&++n==t)return r;r=r.nextSibling}return null}function next(e){while((e=e.nextSibling)&&e.nodeType!=1);return e}function prev(e){while((e=e.previousSibling)&&e.nodeType!=1);return e}function children(e){var t=e.firstChild,n=-1,r;while(t)r=t.nextSibling,t.nodeType==3&&!nonSpace.test(t.nodeValue)?e.removeChild(t):t.nodeIndex=++n,t=r;return this}function byClassName(e,t,n){if(!n)return e;var r=[],i=-1,s;for(var o=0,u;u=e[o];o++)(" "+u.className+" ").indexOf(n)!=-1&&(r[++i]=u);return r}function attrValue(e,t){return!e.tagName&&typeof e.length!="undefined"&&(e=e[0]),e?t=="for"?e.htmlFor:t=="class"||t=="className"?e.className:e.getAttribute(t)||e[t]:null}function getNodes(e,t,n){var r=[],i=-1,s;if(!e)return r;n=n||"*",typeof e.getElementsByTagName!="undefined"&&(e=[e]);if(!t)for(var o=0,u;u=e[o];o++){s=u.getElementsByTagName(n);for(var a=0,f;f=s[a];a++)r[++i]=f}else if(t=="/"||t==">"){var l=n.toUpperCase();for(var o=0,u,c;u=e[o];o++){c=u.childNodes;for(var a=0,h;h=c[a];a++)if(h.nodeName==l||h.nodeName==n||n=="*")r[++i]=h}}else if(t=="+"){var l=n.toUpperCase();for(var o=0,p;p=e[o];o++){while((p=p.nextSibling)&&p.nodeType!=1);p&&(p.nodeName==l||p.nodeName==n||n=="*")&&(r[++i]=p)}}else if(t=="~"){var l=n.toUpperCase();for(var o=0,p;p=e[o];o++)while(p=p.nextSibling)if(p.nodeName==l||p.nodeName==n||n=="*")r[++i]=p}return r}function concat(e,t){if(t.slice)return e.concat(t);for(var n=0,r=t.length;n<r;n++)e[e.length]=t[n];return e}function byTag(e,t){if(e.tagName||e==document)e=[e];if(!t)return e;var n=[],r=-1;t=t.toLowerCase();for(var i=0,s;s=e[i];i++)s.nodeType==1&&s.tagName.toLowerCase()==t&&(n[++r]=s);return n}function byId(e,t,n){if(e.tagName||e==document)e=[e];if(!n)return e;var r=[],i=-1;for(var s=0,o;o=e[s];s++)if(o&&o.id==n)return r[++i]=o,r;return r}function byAttribute(e,t,n,r,i){var s=[],o=-1,u=i=="{",a=Ext.DomQuery.operators[r],f,l;for(var c=0,h;h=e[c];c++){if(h.nodeType!=1)continue;l=h.innerHTML,l!==null&&l!==undefined?u?f=Ext.DomQuery.getStyle(h,t):t=="class"||t=="className"?f=h.className:t=="for"?f=h.htmlFor:t=="href"?f=h.getAttribute("href",2):f=h.getAttribute(t):f=h.getAttribute(t);if(a&&a(f,n)||!a&&f)s[++o]=h}return s}function byPseudo(e,t,n){return Ext.DomQuery.pseudos[t](e,n)}function nodupIEXml(e){var t=++key,n;e[0].setAttribute("_nodup",t),n=[e[0]];for(var r=1,i=e.length;r<i;r++){var s=e[r];!s.getAttribute("_nodup")!=t&&(s.setAttribute("_nodup",t),n[n.length]=s)}for(var r=0,i=e.length;r<i;r++)e[r].removeAttribute("_nodup");return n}function nodup(e){if(!e)return[];var t=e.length,n,r,i=e,s,o=-1;if(!t||typeof e.nodeType!="undefined"||t==1)return e;if(isIE&&typeof e[0].selectSingleNode!="undefined")return nodupIEXml(e);var u=++key;e[0]._nodup=u;for(r=1;n=e[r];r++){if(n._nodup==u){i=[];for(var a=0;a<r;a++)i[++o]=e[a];for(a=r+1;s=e[a];a++)s._nodup!=u&&(s._nodup=u,i[++o]=s);return i}n._nodup=u}return i}function quickDiffIEXml(e,t){var n=++key,r=[];for(var i=0,s=e.length;i<s;i++)e[i].setAttribute("_qdiff",n);for(var i=0,s=t.length;i<s;i++)t[i].getAttribute("_qdiff")!=n&&(r[r.length]=t[i]);for(var i=0,s=e.length;i<s;i++)e[i].removeAttribute("_qdiff");return r}function quickDiff(e,t){var n=e.length,r=++key,i=[];if(!n)return t;if(isIE&&typeof e[0].selectSingleNode!="undefined")return quickDiffIEXml(e,t);for(var s=0;s<n;s++)e[s]._qdiff=r;for(var s=0,o=t.length;s<o;s++)t[s]._qdiff!=r&&(i[i.length]=t[s]);return i}function quickId(e,t,n,r){if(e==n){var i=n.ownerDocument||n;return i.getElementById(r)}return e=getNodes(e,t,"*"),byId(e,null,r)}var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,isIE=window.ActiveXObject?!0:!1,key=30803;return eval("var batch = 30803;"),{getStyle:function(e,t){return Ext.fly(e).getStyle(t)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],q=path,mode,lq,tk=Ext.DomQuery.matchers,tklen=tk.length,mm,lmode=q.match(modeRe);lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',q=q.replace(lmode[1],""));while(path.substr(0,1)=="/")path=path.substr(1);while(q&&lq!=q){lq=q;var tm=q.match(tagTokenRe);type=="select"?tm?(tm[1]=="#"?fn[fn.length]='n = quickId(n, mode, root, "'+tm[2]+'");':fn[fn.length]='n = getNodes(n, mode, "'+tm[2]+'");',q=q.replace(tm[0],"")):q.substr(0,1)!="@"&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tm&&(tm[1]=="#"?fn[fn.length]='n = byId(n, null, "'+tm[2]+'");':fn[fn.length]='n = byTag(n, "'+tm[2]+'");',q=q.replace(tm[0],""));while(!(mm=q.match(modeRe))){var matched=!1;for(var j=0;j<tklen;j++){var t=tk[j],m=q.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(e,t){return m[t]}),q=q.replace(m[0],""),matched=!0;break}}if(!matched)throw'Error parsing selector, parsing failed at "'+q+'"'}mm[1]&&(fn[fn.length]='mode="'+mm[1].replace(trimRe,"")+'";',q=q.replace(mm[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),f},select:function(e,t,n){if(!t||t==document)t=document;typeof t=="string"&&(t=document.getElementById(t));var r=e.split(","),i=[];for(var s=0,o=r.length;s<o;s++){var u=r[s].replace(trimRe,"");if(!cache[u]){cache[u]=Ext.DomQuery.compile(u);if(!cache[u])throw u+" is not a valid selector"}var a=cache[u](t);a&&a!=document&&(i=i.concat(a))}return r.length>1?nodup(i):i},selectNode:function(e,t){return Ext.DomQuery.select(e,t)[0]},selectValue:function(e,t,n){e=e.replace(trimRe,""),valueCache[e]||(valueCache[e]=Ext.DomQuery.compile(e,"select"));var r=valueCache[e](t),i;return r=r[0]?r[0]:r,typeof r.normalize=="function"&&r.normalize(),i=r&&r.firstChild?r.firstChild.nodeValue:null,i===null||i===undefined||i===""?n:i},selectNumber:function(e,t,n){var r=Ext.DomQuery.selectValue(e,t,n||0);return parseFloat(r)},is:function(e,t){typeof e=="string"&&(e=document.getElementById(e));var n=Ext.isArray(e),r=Ext.DomQuery.filter(n?e:[e],t);return n?r.length==e.length:r.length>0},filter:function(e,t,n){t=t.replace(trimRe,""),simpleCache[t]||(simpleCache[t]=Ext.DomQuery.compile(t,"simple"));var r=simpleCache[t](e);return n?quickDiff(r,e):r},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(e,t){return e==t},"!=":function(e,t){return e!=t},"^=":function(e,t){return e&&e.substr(0,t.length)==t},"$=":function(e,t){return e&&e.substr(e.length-t.length)==t},"*=":function(e,t){return e&&e.indexOf(t)!==-1},"%=":function(e,t){return e%t==0},"|=":function(e,t){return e&&(e==t||e.substr(0,t.length+1)==t+"-")},"~=":function(e,t){return e&&(" "+e+" ").indexOf(" "+t+" ")!=-1}},pseudos:{"first-child":function(e){var t=[],n=-1,r;for(var i=0,s;s=r=e[i];i++){while((r=r.previousSibling)&&r.nodeType!=1);r||(t[++n]=s)}return t},"last-child":function(e){var t=[],n=-1,r;for(var i=0,s;s=r=e[i];i++){while((r=r.nextSibling)&&r.nodeType!=1);r||(t[++n]=s)}return t},"nth-child":function(e,t){var n=[],r=-1,i=nthRe.exec(t=="even"&&"2n"||t=="odd"&&"2n+1"||!nthRe2.test(t)&&"n+"+t||t),s=(i[1]||1)-0,o=i[2]-0;for(var u=0,a;a=e[u];u++){var f=a.parentNode;if(batch!=f._batch){var l=0;for(var c=f.firstChild;c;c=c.nextSibling)c.nodeType==1&&(c.nodeIndex=++l);f._batch=batch}if(s==1){if(o==0||a.nodeIndex==o)n[++r]=a}else(a.nodeIndex+o)%s==0&&(n[++r]=a)}return n},"only-child":function(e){var t=[],n=-1;for(var r=0,i;i=e[r];r++)!prev(i)&&!next(i)&&(t[++n]=i);return t},empty:function(e){var t=[],n=-1;for(var r=0,i;i=e[r];r++){var s=i.childNodes,o=0,u,a=!0;while(u=s[o]){++o;if(u.nodeType==1||u.nodeType==3){a=!1;break}}a&&(t[++n]=i)}return t},contains:function(e,t){var n=[],r=-1;for(var i=0,s;s=e[i];i++)(s.textContent||s.innerText||"").indexOf(t)!=-1&&(n[++r]=s);return n},nodeValue:function(e,t){var n=[],r=-1;for(var i=0,s;s=e[i];i++)s.firstChild&&s.firstChild.nodeValue==t&&(n[++r]=s);return n},checked:function(e){var t=[],n=-1;for(var r=0,i;i=e[r];r++)i.checked==1&&(t[++n]=i);return t},not:function(e,t){return Ext.DomQuery.filter(e,t,!0)},any:function(e,t){var n=t.split("|"),r=[],i=-1,s;for(var o=0,u;u=e[o];o++)for(var a=0;s=n[a];a++)if(Ext.DomQuery.is(u,s)){r[++i]=u;break}return r},odd:function(e){return this["nth-child"](e,"odd")},even:function(e){return this["nth-child"](e,"even")},nth:function(e,t){return e[t-1]||[]},first:function(e){return e[0]||[]},last:function(e){return e[e.length-1]||[]},has:function(e,t){var n=Ext.DomQuery.select,r=[],i=-1;for(var s=0,o;o=e[s];s++)n(t,o).length>0&&(r[++i]=o);return r},next:function(e,t){var n=Ext.DomQuery.is,r=[],i=-1;for(var s=0,o;o=e[s];s++){var u=next(o);u&&n(u,t)&&(r[++i]=o)}return r},prev:function(e,t){var n=Ext.DomQuery.is,r=[],i=-1;for(var s=0,o;o=e[s];s++){var u=prev(o);u&&n(u,t)&&(r[++i]=o)}return r}}}}(),Ext.query=Ext.DomQuery.select,Ext.EventManager=function(){function c(e){var t=!1,n=0,r=l.length,t=!1,i=!1,s;if(e){if(e.getElementById||e.navigator){for(;n<r;++n){s=l[n];if(s.el===e){t=s.id;break}}t||(t=Ext.id(e),l.push({id:t,el:e}),i=!0)}else t=Ext.id(e);Ext.elCache[t]||(Ext.Element.addToCache(new Ext.Element(e),t),i&&(Ext.elCache[t].skipGC=!0))}return t}function h(e,t,n,i,s,u){e=Ext.getDom(e);var a=c(e),f=Ext.elCache[a].events,l;l=r.on(e,t,s),f[t]=f[t]||[],f[t].push([n,s,u,l,i]);if(t=="mousewheel"&&e.addEventListener){var h=["DOMMouseScroll",s,!1];e.addEventListener.apply(e,h),Ext.EventManager.addListener(o,"unload",function(){e.removeEventListener.apply(e,h)})}t=="mousedown"&&e==document&&Ext.EventManager.stoppedMouseDownEvent.addListener(s)}function p(){if(!n){Ext.isReady=n=!0,t&&clearInterval(t),(Ext.isGecko||Ext.isOpera)&&s.removeEventListener(a,p,!1);if(Ext.isIE){var r=s.getElementById(u);r&&(r.onreadystatechange=null,r.parentNode.removeChild(r))}e&&(e.fire(),e.listeners=[])}}function d(){var n="complete";e=new Ext.util.Event,Ext.isGecko||Ext.isOpera?s.addEventListener(a,p,!1):Ext.isIE?(s.write("<script id="+u+' defer="defer" src="//:"></script>'),s.getElementById(u).onreadystatechange=function(){this.readyState==n&&p()}):Ext.isWebKit&&(t=setInterval(function(){s.readyState==n&&p()},10)),r.on(o,"load",p)}function v(e,t){return function(){var n=Ext.toArray(arguments);t.target==Ext.EventObject.setEvent(n[0]).target&&e.apply(this,n)}}function m(e,t,n){return function(r){n.delay(t.buffer,e,null,[new Ext.EventObjectImpl(r)])}}function g(e,t,n,r,i){return function(s){Ext.EventManager.removeListener(t,n,r,i),e(s)}}function y(e,t,n){return function(r){var i=new Ext.util.DelayedTask(e);n.tasks||(n.tasks=[]),n.tasks.push(i),i.delay(t.delay||10,e,null,[new Ext.EventObjectImpl(r)])}}function b(e,t,n,r,i){function a(e){if(!Ext)return;e=Ext.EventObject.setEvent(e);var t;if(s.delegate){if(!(t=e.getTarget(s.delegate,o)))return}else t=e.target;s.stopEvent&&e.stopEvent(),s.preventDefault&&e.preventDefault(),s.stopPropagation&&e.stopPropagation(),s.normalized&&(e=e.browserEvent),r.call(i||o,e,t,s)}var s=Ext.isObject(n)?n:{},o=Ext.getDom(e),u;r=r||s.fn,i=i||s.scope;if(!o)throw'Error listening for "'+t+'". Element "'+e+"\" doesn't exist.";return s.target&&(a=v(a,s)),s.delay&&(a=y(a,s,r)),s.single&&(a=g(a,o,t,r,i)),s.buffer&&(u=new Ext.util.DelayedTask(a),a=m(a,s,u)),h(o,t,r,u,a,i),a}var e,t,n=!1,r=Ext.lib.Event,i=Ext.lib.Dom,s=document,o=window,u="ie-deferred-loader",a="DOMContentLoaded",f=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,l=[],w={addListener:function(e,t,n,r,i){if(Ext.isObject(t)){var s=t,o,u;for(o in s)u=s[o],f.test(o)||(Ext.isFunction(u)?b(e,o,s,u,s.scope):b(e,o,u))}else b(e,t,i,n,r)},removeListener:function(e,t,n,i){e=Ext.getDom(e);var o=c(e),u=e&&Ext.elCache[o].events[t]||[],a,f,l,h,p,d,v;for(f=0,d=u.length;f<d;f++)if(Ext.isArray(v=u[f])&&v[0]==n&&(!i||v[2]==i)){v[4]&&v[4].cancel(),h=n.tasks&&n.tasks.length;if(h){while(h--)n.tasks[h].cancel();delete n.tasks}p=a=v[1],r.extAdapter&&(p=v[3]),r.un(e,t,p),u.splice(f,1),u.length===0&&delete Ext.elCache[o].events[t];for(h in Ext.elCache[o].events)return!1;return Ext.elCache[o].events={},!1}t=="mousewheel"&&e.addEventListener&&a&&e.removeEventListener("DOMMouseScroll",a,!1),t=="mousedown"&&e==s&&a&&Ext.EventManager.stoppedMouseDownEvent.removeListener(a)},removeAll:function(e){e=Ext.getDom(e);var t=c(e),n=Ext.elCache[t]||{},i=n.events||{},s,o,u,a,f,l;for(a in i)if(i.hasOwnProperty(a)){s=i[a];for(o=0,u=s.length;o<u;o++){f=s[o],f[4]&&f[4].cancel();if(f[0].tasks&&(l=f[0].tasks.length)){while(l--)f[0].tasks[l].cancel();delete f.tasks}r.un(e,a,r.extAdapter?f[3]:f[1])}}Ext.elCache[t]&&(Ext.elCache[t].events={})},getListeners:function(e,t){e=Ext.getDom(e);var n=c(e),r=Ext.elCache[n]||{},i=r.events||{},s=[];return i&&i[t]?i[t]:null},purgeElement:function(e,t,n){e=Ext.getDom(e);var r=c(e),i=Ext.elCache[r]||{},s=i.events||{},o,u,a;if(n){if(s&&s.hasOwnProperty(n)){u=s[n];for(o=0,a=u.length;o<a;o++)Ext.EventManager.removeListener(e,n,u[o][0])}}else Ext.EventManager.removeAll(e);if(t&&e&&e.childNodes)for(o=0,a=e.childNodes.length;o<a;o++)Ext.EventManager.purgeElement(e.childNodes[o],t,n)},_unload:function(){var e;for(e in Ext.elCache)Ext.EventManager.removeAll(e)},onDocumentReady:function(t,r,i){n?(e.addListener(t,r,i),e.fire(),e.listeners=[]):(e||d(),i=i||{},i.delay=i.delay||1,e.addListener(t,r,i))}};return w.on=w.addListener,w.un=w.removeListener,w.stoppedMouseDownEvent=new Ext.util.Event,w}(),Ext.onReady=Ext.EventManager.onDocumentReady,function(){var e=function(){var e=document.body||document.getElementsByTagName("body")[0];if(!e)return!1;var t=[" ",Ext.isIE?"ext-ie "+(Ext.isIE6?"ext-ie6":Ext.isIE7?"ext-ie7":"ext-ie8"):Ext.isGecko?"ext-gecko "+(Ext.isGecko2?"ext-gecko2":"ext-gecko3"):Ext.isOpera?"ext-opera":Ext.isWebKit?"ext-webkit":""];Ext.isSafari?t.push("ext-safari "+(Ext.isSafari2?"ext-safari2":Ext.isSafari3?"ext-safari3":"ext-safari4")):Ext.isChrome&&t.push("ext-chrome"),Ext.isMac&&t.push("ext-mac"),Ext.isLinux&&t.push("ext-linux");if(Ext.isStrict||Ext.isBorderBox){var n=e.parentNode;n&&(n.className+=Ext.isStrict?" ext-strict":" ext-border-box")}return e.className+=t.join(" "),!0};e()||Ext.onReady(e)}(),Ext.EventObject=function(){var e=Ext.lib.Event,t={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},n=Ext.isIE?{1:0,4:1,2:2}:Ext.isWebKit?{1:0,2:1,3:2}:{0:0,1:1,2:2};return Ext.EventObjectImpl=function(e){e&&this.setEvent(e.browserEvent||e)},Ext.EventObjectImpl.prototype={setEvent:function(t){var r=this;return t==r||t&&t.browserEvent?t:(r.browserEvent=t,t?(r.button=t.button?n[t.button]:t.which?t.which-1:-1,t.type=="click"&&r.button==-1&&(r.button=0),r.type=t.type,r.shiftKey=t.shiftKey,r.ctrlKey=t.ctrlKey||t.metaKey||!1,r.altKey=t.altKey,r.keyCode=t.keyCode,r.charCode=t.charCode,r.target=e.getTarget(t),r.xy=e.getXY(t)):(r.button=-1,r.shiftKey=!1,r.ctrlKey=!1,r.altKey=!1,r.keyCode=0,r.charCode=0,r.target=null,r.xy=[0,0]),r)},stopEvent:function(){var t=this;t.browserEvent&&(t.browserEvent.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(t),e.stopEvent(t.browserEvent))},preventDefault:function(){this.browserEvent&&e.preventDefault(this.browserEvent)},stopPropagation:function(){var t=this;t.browserEvent&&(t.browserEvent.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(t),e.stopPropagation(t.browserEvent))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(e){return Ext.isSafari?t[e]||e:e},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(e,t,n){return e?Ext.fly(this.target).findParent(e,t,n):n?Ext.get(this.target):this.target},getRelatedTarget:function(){return this.browserEvent?e.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var e=this.browserEvent,t=0;return e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t},within:function(e,t,n){if(e){var r=this[t?"getRelatedTarget":"getTarget"]();return r&&((n?r==Ext.getDom(e):!1)||Ext.fly(e).contains(r))}return!1}},new Ext.EventObjectImpl}(),function(){function l(){if(!Ext.enableGarbageCollector)clearInterval(s.collectorThreadId);else{var t,n,r,i;for(t in o){i=o[t];if(i.skipGC)continue;n=i.el,r=n.dom;if(!r||!r.parentNode||!r.offsetParent&&!e.getElementById(t))Ext.enableListenerCollection&&Ext.EventManager.removeAll(r),delete o[t]}if(Ext.isIE){var u={};for(t in o)u[t]=o[t];o=Ext.elCache=u}}}var e=document;Ext.Element=function(t,n){var r=typeof t=="string"?e.getElementById(t):t,i;if(!r)return null;i=r.id;if(!n&&i&&Ext.elCache[i])return Ext.elCache[i].el;this.dom=r,this.id=i||Ext.id(r)};var t=Ext.lib.Dom,n=Ext.DomHelper,r=Ext.lib.Event,i=Ext.lib.Anim,s=Ext.Element,o=Ext.elCache;s.prototype={set:function(e,t){var r=this.dom,i,s,t=t!==!1&&!!r.setAttribute;for(i in e)e.hasOwnProperty(i)&&(s=e[i],i=="style"?n.applyStyles(r,s):i=="cls"?r.className=s:t?r.setAttribute(i,s):r[i]=s);return this},defaultUnit:"px",is:function(e){return Ext.DomQuery.is(this.dom,e)},focus:function(e,t){var n=this,t=t||n.dom;try{Number(e)?n.focus.defer(e,null,[null,t]):t.focus()}catch(r){}return n},blur:function(){try{this.dom.blur()}catch(e){}return this},getValue:function(e){var t=this.dom.value;return e?parseInt(t,10):t},addListener:function(e,t,n,r){return Ext.EventManager.on(this.dom,e,t,n||this,r),this},removeListener:function(e,t,n){return Ext.EventManager.removeListener(this.dom,e,t,n||this),this},removeAllListeners:function(){return Ext.EventManager.removeAll(this.dom),this},purgeAllListeners:function(){return Ext.EventManager.purgeElement(this,!0),this},addUnits:function(e){if(e===""||e=="auto"||e===undefined)e=e||"";else if(!isNaN(e)||!a.test(e))e+=this.defaultUnit||"px";return e},load:function(e,t,n){return Ext.Ajax.request(Ext.apply({params:t,url:e.url||e,callback:n,el:this.dom,indicatorText:e.indicatorText||""},Ext.isObject(e)?e:{})),this},isBorderBox:function(){return h[(this.dom.tagName||"").toLowerCase()]||Ext.isBorderBox},remove:function(){var e=this,t=e.dom;t&&(delete e.dom,Ext.removeNode(t))},hover:function(e,t,n,r){var i=this;return i.on("mouseenter",e,n||i.dom,r),i.on("mouseleave",t,n||i.dom,r),i},contains:function(e){return e?Ext.lib.Dom.isAncestor(this.dom,e.dom?e.dom:e):!1},getAttributeNS:function(e,t){return this.getAttribute(t,e)},getAttribute:Ext.isIE?function(e,t){var n=this.dom,r=typeof n[t+":"+e];return["undefined","unknown"].indexOf(r)==-1?n[t+":"+e]:n[e]}:function(e,t){var n=this.dom;return n.getAttributeNS(t,e)||n.getAttribute(t+":"+e)||n.getAttribute(e)||n[e]},update:function(e){return this.dom&&(this.dom.innerHTML=e),this}};var u=s.prototype;s.addMethods=function(e){Ext.apply(u,e)},u.on=u.addListener,u.un=u.removeListener,u.autoBoxAdjust=!0;var a=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,f;s.get=function(t){var n,r,i;if(!t)return null;if(typeof t=="string")return(r=e.getElementById(t))?(o[t]&&o[t].el?(n=o[t].el,n.dom=r):n=s.addToCache(new s(r)),n):null;if(t.tagName)return(i=t.id)||(i=Ext.id(t)),o[i]&&o[i].el?(n=o[i].el,n.dom=t):n=s.addToCache(new s(t)),n;if(t instanceof s)return t!=f&&(t.dom=e.getElementById(t.id)||t.dom),t;if(t.isComposite)return t;if(Ext.isArray(t))return s.select(t);if(t==e){if(!f){var u=function(){};u.prototype=s.prototype,f=new u,f.dom=e}return f}return null},s.addToCache=function(e,t){return t=t||e.id,o[t]={el:e,data:{},events:{}},e},s.data=function(e,t,n){e=s.get(e);if(!e)return null;var r=o[e.id].data;return arguments.length==2?r[t]:r[t]=n},s.collectorThreadId=setInterval(l,3e4);var c=function(){};c.prototype=s.prototype,s.Flyweight=function(e){this.dom=e},s.Flyweight.prototype=new c,s.Flyweight.prototype.isFlyweight=!0,s._flyweights={},s.fly=function(e,t){var n=null;t=t||"_global";if(e=Ext.getDom(e))(s._flyweights[t]=s._flyweights[t]||new s.Flyweight).dom=e,n=s._flyweights[t];return n},Ext.get=s.get,Ext.fly=s.fly;var h=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko)h.button=1;Ext.EventManager.on(window,"unload",function(){delete o,delete s._flyweights})}(),Ext.Element.addMethods(function(){var e="parentNode",t="nextSibling",n="previousSibling",r=Ext.DomQuery,i=Ext.get;return{findParent:function(e,t,n){var s=this.dom,o=document.body,u=0,f;if(Ext.isGecko&&Object.prototype.toString.call(s)=="[object XULElement]")return null;t=t||50,isNaN(t)&&(f=Ext.getDom(t),t=Number.MAX_VALUE);while(s&&s.nodeType==1&&u<t&&s!=o&&s!=f){if(r.is(s,e))return n?i(s):s;u++,s=s.parentNode}return null},findParentNode:function(e,t,n){var r=Ext.fly(this.dom.parentNode,"_internal");return r?r.findParent(e,t,n):null},up:function(e,t){return this.findParentNode(e,t,!0)},select:function(e){return Ext.Element.select(e,this.dom)},query:function(e){return r.select(e,this.dom)},child:function(e,t){var n=r.selectNode(e,this.dom);return t?n:i(n)},down:function(e,t){var n=r.selectNode(" > "+e,this.dom);return t?n:i(n)},parent:function(t,n){return this.matchNode(e,e,t,n)},next:function(e,n){return this.matchNode(t,t,e,n)},prev:function(e,t){return this.matchNode(n,n,e,t)},first:function(e,n){return this.matchNode(t,"firstChild",e,n)},last:function(e,t){return this.matchNode(n,"lastChild",e,t)},matchNode:function(e,t,n,s){var o=this.dom[t];while(o){if(o.nodeType==1&&(!n||r.is(o,n)))return s?o:i(o);o=o[e]}return null}}}()),Ext.Element.addMethods(function(){var e=Ext.getDom,t=Ext.get,n=Ext.DomHelper;return{appendChild:function(e){return t(e).appendTo(this)},appendTo:function(t){return e(t).appendChild(this.dom),this},insertBefore:function(t){return(t=e(t)).parentNode.insertBefore(this.dom,t),this},insertAfter:function(t){return(t=e(t)).parentNode.insertBefore(this.dom,t.nextSibling),this},insertFirst:function(n,r){return n=n||{},n.nodeType||n.dom||typeof n=="string"?(n=e(n),this.dom.insertBefore(n,this.dom.firstChild),r?n:t(n)):this.createChild(n,this.dom.firstChild,r)},replace:function(e){return e=t(e),this.insertBefore(e),e.remove(),this},replaceWith:function(t){var r=this;return t.nodeType||t.dom||typeof t=="string"?(t=e(t),r.dom.parentNode.insertBefore(t,r.dom)):t=n.insertBefore(r.dom,t),delete Ext.elCache[r.id],Ext.removeNode(r.dom),r.id=Ext.id(r.dom=t),Ext.Element.addToCache(r.isFlyweight?new Ext.Element(r.dom):r),r},createChild:function(e,t,r){return e=e||{tag:"div"},t?n.insertBefore(t,e,r!==!0):n[this.dom.firstChild?"append":"overwrite"](this.dom,e,r!==!0)},wrap:function(e,t){var r=n.insertBefore(this.dom,e||{tag:"div"},!t);return r.dom?r.dom.appendChild(this.dom):r.appendChild(this.dom),r},insertHtml:function(e,t,r){var i=n.insertHtml(e,this.dom,t);return r?Ext.get(i):i}}}()),Ext.Element.addMethods(function(){function k(e,t){return t.charAt(1).toUpperCase()}function L(n){return e[n]||(e[n]=n=="float"?i:n.replace(t,k))}var e={},t=/(-[a-z])/gi,n={},r=document.defaultView,i=Ext.isIE?"styleFloat":"cssFloat",s=/alpha\(opacity=(.*)\)/i,o=/^\s+|\s+$/g,u=Ext.Element,a="padding",f="margin",l="border",c="-left",h="-right",p="-top",d="-bottom",v="-width",m=Math,g="hidden",y="isClipped",b="overflow",w="overflow-x",E="overflow-y",S="originalClip",x={l:l+c+v,r:l+h+v,t:l+p+v,b:l+d+v},T={l:a+c,r:a+h,t:a+p,b:a+d},N={l:f+c,r:f+h,t:f+p,b:f+d},C=Ext.Element.data;return{adjustWidth:function(e){var t=this,n=Ext.isNumber(e);return n&&t.autoBoxAdjust&&!t.isBorderBox()&&(e-=t.getBorderWidth("lr")+t.getPadding("lr")),n&&e<0?0:e},adjustHeight:function(e){var t=this,n=Ext.isNumber(e);return n&&t.autoBoxAdjust&&!t.isBorderBox()&&(e-=t.getBorderWidth("tb")+t.getPadding("tb")),n&&e<0?0:e},addClass:function(e){var t=this,n,r,i;e=Ext.isArray(e)?e:[e];for(n=0,r=e.length;n<r;n++)i=e[n],i&&(t.dom.className+=!t.hasClass(i)&&i?" "+i:"");return t},radioClass:function(e){var t=this.dom.parentNode.childNodes,n;e=Ext.isArray(e)?e:[e];for(var r=0,i=t.length;r<i;r++)n=t[r],n&&n.nodeType==1&&Ext.fly(n,"_internal").removeClass(e);return this.addClass(e)},removeClass:function(e){var t=this,r;e=Ext.isArray(e)?e:[e];if(t.dom&&t.dom.className)for(var i=0,s=e.length;i<s;i++)r=e[i],r&&(t.dom.className=t.dom.className.replace(n[r]=n[r]||new RegExp("(?:^|\\s+)"+r+"(?:\\s+|$)","g")," "));return t},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},hasClass:function(e){return e&&(" "+this.dom.className+" ").indexOf(" "+e+" ")!=-1},replaceClass:function(e,t){return this.removeClass(e).addClass(t)},isStyle:function(e,t){return this.getStyle(e)==t},getStyle:function(){return r&&r.getComputedStyle?function(e){var t=this.dom,n,i,s,o,u=Ext.isWebKit,o;return t==document?null:(e=L(e),u&&/marginRight/.test(e)&&(o=this.getStyle("display"),t.style.display="inline-block"),s=(n=t.style[e])?n:(i=r.getComputedStyle(t,""))?i[e]:null,u&&(s=="rgba(0, 0, 0, 0)"?s="transparent":o&&(t.style.display=o)),s)}:function(e){var t=this.dom,n,r;if(t==document)return null;if(e=="opacity"){if(t.style.filter.match)if(n=t.style.filter.match(s)){var i=parseFloat(n[1]);if(!isNaN(i))return i?i/100:0}return 1}return e=L(e),t.style[e]||((r=t.currentStyle)?r[e]:null)}}(),getColor:function(e,t,n){var r=this.getStyle(e),i=Ext.isDefined(n)?n:"#",s;return!r||/transparent|inherit/.test(r)?t:(/^r/.test(r)?Ext.each(r.slice(4,r.length-1).split(","),function(e){s=parseInt(e,10),i+=(s<16?"0":"")+s.toString(16)}):(r=r.replace("#",""),i+=r.length==3?r.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):r),i.length>5?i.toLowerCase():t)},setStyle:function(e,t){var n,r,i;Ext.isObject(e)||(n={},n[e]=t,e=n);for(r in e)t=e[r],r=="opacity"?this.setOpacity(t):this.dom.style[L(r)]=t;return this},setOpacity:function(e,t){var n=this,r=n.dom.style;if(!t||!n.anim)if(Ext.isIE){var i=e<1?"alpha(opacity="+e*100+")":"",u=r.filter.replace(s,"").replace(o,"");r.zoom=1,r.filter=u+(u.length>0?" ":"")+i}else r.opacity=e;else n.anim({opacity:{to:e}},n.preanim(arguments,1),null,.35,"easeIn");return n},clearOpacity:function(){var e=this.dom.style;return Ext.isIE?Ext.isEmpty(e.filter)||(e.filter=e.filter.replace(s,"").replace(o,"")):e.opacity=e["-moz-opacity"]=e["-khtml-opacity"]="",this},getHeight:function(e){var t=this,n=t.dom,r=Ext.isIE&&t.isStyle("display","none"),i=m.max(n.offsetHeight,r?0:n.clientHeight)||0;return i=e?i-t.getBorderWidth("tb")-t.getPadding("tb"):i,i<0?0:i},getWidth:function(e){var t=this,n=t.dom,r=Ext.isIE&&t.isStyle("display","none"),i=m.max(n.offsetWidth,r?0:n.clientWidth)||0;return i=e?i-t.getBorderWidth("lr")-t.getPadding("lr"):i,i<0?0:i},setWidth:function(e,t){var n=this;return e=n.adjustWidth(e),!t||!n.anim?n.dom.style.width=n.addUnits(e):n.anim({width:{to:e}},n.preanim(arguments,1)),n},setHeight:function(e,t){var n=this;return e=n.adjustHeight(e),!t||!n.anim?n.dom.style.height=n.addUnits(e):n.anim({height:{to:e}},n.preanim(arguments,1)),n},getBorderWidth:function(e){return this.addStyles(e,x)},getPadding:function(e){return this.addStyles(e,T)},clip:function(){var e=this,t=e.dom;return C(t,y)||(C(t,y,!0),C(t,S,{o:e.getStyle(b),x:e.getStyle(w),y:e.getStyle(E)}),e.setStyle(b,g),e.setStyle(w,g),e.setStyle(E,g)),e},unclip:function(){var e=this,t=e.dom;if(C(t,y)){C(t,y,!1);var n=C(t,S);n.o&&e.setStyle(b,n.o),n.x&&e.setStyle(w,n.x),n.y&&e.setStyle(E,n.y)}return e},addStyles:function(e,t){var n=0,r=e.match(/\w/g),i;for(var s=0,o=r.length;s<o;s++)i=r[s]&&parseInt(this.getStyle(t[r[s]]),10),i&&(n+=m.abs(i));return n},margins:N}}()),function(){var e=Ext.lib.Dom,t="left",n="right",r="top",i="bottom",s="position",o="static",u="relative",a="auto",f="z-index";Ext.Element.addMethods({getX:function(){return e.getX(this.dom)},getY:function(){return e.getY(this.dom)},getXY:function(){return e.getXY(this.dom)},getOffsetsTo:function(e){var t=this.getXY(),n=Ext.fly(e,"_internal").getXY();return[t[0]-n[0],t[1]-n[1]]},setX:function(e,t){return this.setXY([e,this.getY()],this.animTest(arguments,t,1))},setY:function(e,t){return this.setXY([this.getX(),e],this.animTest(arguments,t,1))},setLeft:function(e){return this.setStyle(t,this.addUnits(e)),this},setTop:function(e){return this.setStyle(r,this.addUnits(e)),this},setRight:function(e){return this.setStyle(n,this.addUnits(e)),this},setBottom:function(e){return this.setStyle(i,this.addUnits(e)),this},setXY:function(t,n){var r=this;return!n||!r.anim?e.setXY(r.dom,t):r.anim({points:{to:t}},r.preanim(arguments,1),"motion"),r},setLocation:function(e,t,n){return this.setXY([e,t],this.animTest(arguments,n,2))},moveTo:function(e,t,n){return this.setXY([e,t],this.animTest(arguments,n,2))},getLeft:function(e){return e?parseInt(this.getStyle(t),10)||0:this.getX()},getRight:function(e){var t=this;return e?t.getLeft(!0)+t.getWidth()||0:t.getX()+t.getWidth()},getTop:function(e){return e?parseInt(this.getStyle(r),10)||0:this.getY()},getBottom:function(e){var t=this;return e?t.getTop(!0)+t.getHeight()||0:t.getY()+t.getHeight()},position:function(e,t,n,r){var i=this;!e&&i.isStyle(s,o)?i.setStyle(s,u):e&&i.setStyle(s,e),t&&i.setStyle(f,t),(n||r)&&i.setXY([n||!1,r||!1])},clearPositioning:function(e){return e=e||"",this.setStyle({left:e,right:e,top:e,bottom:e,"z-index":"",position:o}),this},getPositioning:function(){var e=this.getStyle(t),o=this.getStyle(r);return{position:this.getStyle(s),left:e,right:e?"":this.getStyle(n),top:o,bottom:o?"":this.getStyle(i),"z-index":this.getStyle(f)}},setPositioning:function(e){var t=this,n=t.dom.style;return t.setStyle(e),e.right==a&&(n.right=""),e.bottom==a&&(n.bottom=""),t},translatePoints:function(e,n){n=isNaN(e[1])?n:e[1],e=isNaN(e[0])?e:e[0];var i=this,o=i.isStyle(s,u),a=i.getXY(),f=parseInt(i.getStyle(t),10),l=parseInt(i.getStyle(r),10);return f=isNaN(f)?o?0:i.dom.offsetLeft:f,l=isNaN(l)?o?0:i.dom.offsetTop:l,{left:e-a[0]+f,top:n-a[1]+l}},animTest:function(e,t,n){return!!t&&this.preanim?this.preanim(e,n):!1}})}(),Ext.Element.addMethods({isScrollable:function(){var e=this.dom;return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},scrollTo:function(e,t){return this.dom["scroll"+(/top/i.test(e)?"Top":"Left")]=t,this},getScroll:function(){var e=this.dom,t=document,n=t.body,r=t.documentElement,i,s,o;return e==t||e==n?(Ext.isIE&&Ext.isStrict?(i=r.scrollLeft,s=r.scrollTop):(i=window.pageXOffset,s=window.pageYOffset),o={left:i||(n?n.scrollLeft:0),top:s||(n?n.scrollTop:0)}):o={left:e.scrollLeft,top:e.scrollTop},o}}),Ext.Element.VISIBILITY=1,Ext.Element.DISPLAY=2,Ext.Element.addMethods(function(){var e="visibility",t="display",n="hidden",r="none",i="originalDisplay",s="visibilityMode",o=Ext.Element.DISPLAY,u=Ext.Element.data,a=function(e){var t=u(e,i);return t===undefined&&u(e,i,t=""),t},f=function(e){var t=u(e,s);return t===undefined&&u(e,s,t=1),t};return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(e){return u(this.dom,s,e),this},animate:function(e,t,n,r,i){return this.anim(e,{duration:t,callback:n,easing:r},i),this},anim:function(e,t,n,r,i,s){n=n||"run",t=t||{};var o=this,u=Ext.lib.Anim[n](o.dom,e,t.duration||r||.35,t.easing||i||"easeOut",function(){s&&s.call(o),t.callback&&t.callback.call(t.scope||o,o,t)},o);return t.anim=u,u},preanim:function(e,t){return e[t]?Ext.isObject(e[t])?e[t]:{duration:e[t+1],callback:e[t+2],easing:e[t+3]}:!1},isVisible:function(){return!this.isStyle(e,n)&&!this.isStyle(t,r)},setVisible:function(i,s){var u=this,a=u.dom,l=f(this.dom)==o;return!s||!u.anim?l?u.setDisplayed(i):(u.fixDisplay(),a.style.visibility=i?"visible":n):(i&&(u.setOpacity(.01),u.setVisible(!0)),u.anim({opacity:{to:i?1:0}},u.preanim(arguments,1),null,.35,"easeIn",function(){i||(a.style[l?t:e]=l?r:n,Ext.fly(a).setOpacity(1))})),u},toggle:function(e){var t=this;return t.setVisible(!t.isVisible(),t.preanim(arguments,0)),t},setDisplayed:function(e){return typeof e=="boolean"&&(e=e?a(this.dom):r),this.setStyle(t,e),this},fixDisplay:function(){var i=this;i.isStyle(t,r)&&(i.setStyle(e,n),i.setStyle(t,a(this.dom)),i.isStyle(t,r)&&i.setStyle(t,"block"))},hide:function(e){return this.setVisible(!1,this.preanim(arguments,0)),this},show:function(e){return this.setVisible(!0,this.preanim(arguments,0)),this}}}()),function(){var e=null,t=undefined,n=!0,r=!1,i="setX",s="setY",o="setXY",u="left",a="bottom",f="top",l="right",c="height",h="width",p="points",d="hidden",v="absolute",m="visible",g="motion",y="position",b="easeOut",w=new Ext.Element.Flyweight,E={},S=function(e){return e||{}},x=function(e){return w.dom=e,w.id=Ext.id(e),w},T=function(e){return E[e]||(E[e]=[]),E[e]},N=function(e,t){E[e]=t};Ext.enableFx=n,Ext.Fx={switchStatements:function(e,t,n){return t.apply(this,n[e])},slideIn:function(t,n){n=S(n);var r=this,c=r.dom,h=c.style,p,y,w,E,T,h,N,C,k,L;return t=t||"t",r.queueFx(n,function(){function r(){x(c).fxUnwrap(E,y.pos,n),h.width=y.width,h.height=y.height,x(c).afterFx(n)}function S(e,t,n,r,i,s,o,u,a,f,l){var c={};return x(e).setWidth(n).setHeight(r),x(e)[i]&&x(e)[i](s),t[o]=t[u]="0",a&&(c.width=a),f&&(c.height=f),l&&(c.points=l),c}p=x(c).getXY(),x(c).fixDisplay(),y=x(c).getFxRestore(),w={x:p[0],y:p[1],0:p[0],1:p[1],width:c.offsetWidth,height:c.offsetHeight},w.right=w.x+w.width,w.bottom=w.y+w.height,x(c).setWidth(w.width).setHeight(w.height),E=x(c).fxWrap(y.pos,n,d),h.visibility=m,h.position=v,C={to:[w.x,w.y]},k={to:w.width},L={to:w.height},N=x(c).switchStatements(t.toLowerCase(),S,{t:[E,h,w.width,0,e,e,u,a,e,L,e],l:[E,h,0,w.height,e,e,l,f,k,e,e],r:[E,h,w.width,w.height,i,w.right,u,f,e,e,C],b:[E,h,w.width,w.height,s,w.bottom,u,f,e,L,C],tl:[E,h,0,0,e,e,l,a,k,L,C],bl:[E,h,0,0,s,w.y+w.height,l,f,k,L,C],br:[E,h,0,0,o,[w.right,w.bottom],u,f,k,L,C],tr:[E,h,0,0,i,w.x+w.width,u,a,k,L,C]}),h.visibility=m,x(E).show(),arguments.callee.anim=x(E).fxanim(N,n,g,.5,b,r)}),r},slideOut:function(e,t){t=S(t);var n=this,i=n.dom,s=i.style,o=n.getXY(),d,y,w,E,T={to:0};return e=e||"t",n.queueFx(t,function(){function n(){t.useDisplay?x(i).setDisplayed(r):x(i).hide(),x(i).fxUnwrap(d,y.pos,t),s.width=y.width,s.height=y.height,x(i).afterFx(t)}function S(e,t,n,r,i,s,o,u,a){var f={};return e[t]=e[n]="0",f[r]=i,s&&(f[s]=o),u&&(f[u]=a),f}y=x(i).getFxRestore(),w={x:o[0],y:o[1],0:o[0],1:o[1],width:i.offsetWidth,height:i.offsetHeight},w.right=w.x+w.width,w.bottom=w.y+w.height,x(i).setWidth(w.width).setHeight(w.height),d=x(i).fxWrap(y.pos,t,m),s.visibility=m,s.position=v,x(d).setWidth(w.width).setHeight(w.height),E=x(i).switchStatements(e.toLowerCase(),S,{t:[s,u,a,c,T],l:[s,l,f,h,T],r:[s,u,f,h,T,p,{to:[w.right,w.y]}],b:[s,u,f,c,T,p,{to:[w.x,w.bottom]}],tl:[s,l,a,h,T,c,T],bl:[s,l,f,h,T,c,T,p,{to:[w.x,w.bottom]}],br:[s,u,f,h,T,c,T,p,{to:[w.x+w.width,w.bottom]}],tr:[s,u,a,h,T,c,T,p,{to:[w.right,w.y]}]}),arguments.callee.anim=x(d).fxanim(E,t,g,.5,b,n)}),n},puff:function(e){e=S(e);var t=this,n=t.dom,i=n.style,s,o,u;return t.queueFx(e,function(){function t(){e.useDisplay?x(n).setDisplayed(r):x(n).hide(),x(n).clearOpacity(),x(n).setPositioning(u.pos),i.width=u.width,i.height=u.height,i.fontSize="",x(n).afterFx(e)}s=x(n).getWidth(),o=x(n).getHeight(),x(n).clearOpacity(),x(n).show(),u=x(n).getFxRestore(),arguments.callee.anim=x(n).fxanim({width:{to:x(n).adjustWidth(s*2)},height:{to:x(n).adjustHeight(o*2)},points:{by:[-s*.5,-o*.5]},opacity:{to:0},fontSize:{to:200,unit:"%"}},e,g,.5,b,t)}),t},switchOff:function(t){t=S(t);var n=this,i=n.dom,s=i.style,o;return n.queueFx(t,function(){function n(){t.useDisplay?x(i).setDisplayed(r):x(i).hide(),x(i).clearOpacity(),x(i).setPositioning(o.pos),s.width=o.width,s.height=o.height,x(i).afterFx(t)}x(i).clearOpacity(),x(i).clip(),o=x(i).getFxRestore(),x(i).fxanim({opacity:{to:.3}},e,e,.1,e,function(){x(i).clearOpacity(),function(){x(i).fxanim({height:{to:1},points:{by:[0,x(i).getHeight()*.5]}},t,g,.3,"easeIn",n)}.defer(100)})}),n},highlight:function(e,t){t=S(t);var n=this,r=n.dom,i=t.attr||"backgroundColor",s={},o;return n.queueFx(t,function(){function n(){r.style[i]=o,x(r).afterFx(t)}x(r).clearOpacity(),x(r).show(),o=r.style[i],s[i]={from:e||"ffff9c",to:t.endColor||x(r).getColor(i)||"ffffff"},arguments.callee.anim=x(r).fxanim(s,t,"color",1,"easeIn",n)}),n},frame:function(e,t,n){n=S(n);var r=this,i=r.dom,s,o;return r.queueFx(n,function(){function f(){var e=Ext.isBorderBox?2:1;o=s.anim({top:{from:u.y,to:u.y-20},left:{from:u.x,to:u.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:u.height,to:u.height+20*e},width:{from:u.width,to:u.width+20*e}},{duration:n.duration||1,callback:function(){s.remove(),--t>0?a():x(i).afterFx(n)}}),arguments.callee.anim={isAnimated:!0,stop:function(){o.stop()}}}e=e||"#C3DAF9",e.length==6&&(e="#"+e),t=t||1,x(i).show();var r=x(i).getXY(),u={x:r[0],y:r[1],0:r[0],1:r[1],width:i.offsetWidth,height:i.offsetHeight},a=function(){return s=x(document.body||document.documentElement).createChild({style:{position:v,"z-index":35e3,border:"0px solid "+e}}),s.queueFx({},f)};arguments.callee.anim={isAnimated:!0,stop:function(){t=0,s.stopFx()}},a()}),r},pause:function(e){var t=this.dom,n;return this.queueFx({},function(){n=setTimeout(function(){x(t).afterFx({})},e*1e3),arguments.callee.anim={isAnimated:!0,stop:function(){clearTimeout(n),x(t).afterFx({})}}}),this},fadeIn:function(t){t=S(t);var n=this,r=n.dom,i=t.endOpacity||1;return n.queueFx(t,function(){x(r).setOpacity(0),x(r).fixDisplay(),r.style.visibility=m,arguments.callee.anim=x(r).fxanim({opacity:{to:i}},t,e,.5,b,function(){i==1&&x(r).clearOpacity(),x(r).afterFx(t)})}),n},fadeOut:function(t){t=S(t);var n=this,r=n.dom,i=r.style,s=t.endOpacity||0;return n.queueFx(t,function(){arguments.callee.anim=x(r).fxanim({opacity:{to:s}},t,e,.5,b,function(){s==0&&(Ext.Element.data(r,"visibilityMode")==Ext.Element.DISPLAY||t.useDisplay?i.display="none":i.visibility=d,x(r).clearOpacity()),x(r).afterFx(t)})}),n},scale:function(e,t,n){return this.shift(Ext.apply({},n,{width:e,height:t})),this},shift:function(e){e=S(e);var n=this.dom,r={};return this.queueFx(e,function(){for(var i in e)e[i]!=t&&(r[i]={to:e[i]});r.width?r.width.to=x(n).adjustWidth(e.width):r,r.height?r.height.to=x(n).adjustWidth(e.height):r;if(r.x||r.y||r.xy)r.points=r.xy||{to:[r.x?r.x.to:x(n).getX(),r.y?r.y.to:x(n).getY()]};arguments.callee.anim=x(n).fxanim(r,e,g,.35,b,function(){x(n).afterFx(e)})}),this},ghost:function(e,t){t=S(t);var n=this,i=n.dom,s=i.style,o={opacity:{to:0},points:{}},u=o.points,a,f,l;return e=e||"b",n.queueFx(t,function(){function n(){t.useDisplay?x(i).setDisplayed(r):x(i).hide(),x(i).clearOpacity(),x(i).setPositioning(a.pos),s.width=a.width,s.height=a.height,x(i).afterFx(t)}a=x(i).getFxRestore(),f=x(i).getWidth(),l=x(i).getHeight(),u.by=x(i).switchStatements(e.toLowerCase(),function(e,t){return[e,t]},{t:[0,-l],l:[-f,0],r:[f,0],b:[0,l],tl:[-f,-l],bl:[-f,l],br:[f,l],tr:[f,-l]}),arguments.callee.anim=x(i).fxanim(o,t,g,.5,b,n)}),n},syncFx:function(){var e=this;return e.fxDefaults=Ext.apply(e.fxDefaults||{},{block:r,concurrent:n,stopFx:r}),e},sequenceFx:function(){var e=this;return e.fxDefaults=Ext.apply(e.fxDefaults||{},{block:r,concurrent:r,stopFx:r}),e},nextFx:function(){var e=T(this.dom.id)[0];e&&e.call(this)},hasActiveFx:function(){return T(this.dom.id)[0]},stopFx:function(e){var t=this,r=t.dom.id;if(t.hasActiveFx()){var i=T(r)[0];i&&i.anim&&(i.anim.isAnimated?(N(r,[i]),i.anim.stop(e!==undefined?e:n)):N(r,[]))}return t},beforeFx:function(e){return this.hasActiveFx()&&!e.concurrent?e.stopFx?(this.stopFx(),n):r:n},hasFxBlock:function(){var e=T(this.dom.id);return e&&e[0]&&e[0].block},queueFx:function(e,t){var n=x(this.dom);if(!n.hasFxBlock()){Ext.applyIf(e,n.fxDefaults);if(!e.concurrent){var r=n.beforeFx(e);t.block=e.block,T(n.dom.id).push(t),r&&n.nextFx()}else t.call(n)}return n},fxWrap:function(e,t,n){var r=this.dom,i,s;if(!t.wrap||!(i=Ext.getDom(t.wrap))){t.fixPosition&&(s=x(r).getXY());var o=document.createElement("div");o.style.visibility=n,i=r.parentNode.insertBefore(o,r),x(i).setPositioning(e),x(i).isStyle(y,"static")&&x(i).position("relative"),x(r).clearPositioning("auto"),x(i).clip(),i.appendChild(r),s&&x(i).setXY(s)}return i},fxUnwrap:function(e,t,n){var r=this.dom;x(r).clearPositioning(),x(r).setPositioning(t);if(!n.wrap){var i=x(e).dom.parentNode;i.insertBefore(r,e),x(e).remove()}},getFxRestore:function(){var e=this.dom.style;return{pos:this.getPositioning(),width:e.width,height:e.height}},afterFx:function(e){var t=this.dom,r=t.id;e.afterStyle&&x(t).setStyle(e.afterStyle),e.afterCls&&x(t).addClass(e.afterCls),e.remove==n&&x(t).remove(),e.callback&&e.callback.call(e.scope,x(t)),e.concurrent||(T(r).shift(),x(t).nextFx())},fxanim:function(e,t,n,r,i,s){n=n||"run",t=t||{};var o=Ext.lib.Anim[n](this.dom,e,t.duration||r||.35,t.easing||i||b,s,this);return t.anim=o,o}},Ext.Fx.resize=Ext.Fx.scale,Ext.Element.addMethods(Ext.Fx)}(),Ext.CompositeElementLite=function(e,t){this.elements=[],this.add(e,t),this.el=new Ext.Element.Flyweight},Ext.CompositeElementLite.prototype={isComposite:!0,getElement:function(e){var t=this.el;return t.dom=e,t.id=e.id,t},transformElement:function(e){return Ext.getDom(e)},getCount:function(){return this.elements.length},add:function(e,t){var n=this,r=n.elements;if(!e)return this;Ext.isString(e)?e=Ext.Element.selectorFunction(e,t):e.isComposite?e=e.elements:Ext.isIterable(e)||(e=[e]);for(var i=0,s=e.length;i<s;++i)r.push(n.transformElement(e[i]));return n},invoke:function(e,t){var n=this,r=n.elements,i=r.length,s,o;for(o=0;o<i;o++)s=r[o],s&&Ext.Element.prototype[e].apply(n.getElement(s),t);return n},item:function(e){var t=this,n=t.elements[e],r=null;return n&&(r=t.getElement(n)),r},addListener:function(e,t,n,r){var i=this.elements,s=i.length,o,u;for(o=0;o<s;o++)u=i[o],u&&Ext.EventManager.on(u,e,t,n||u,r);return this},each:function(e,t){var n=this,r=n.elements,i=r.length,s,o;for(s=0;s<i;s++){o=r[s];if(o){o=this.getElement(o);if(e.call(t||o,o,n,s))break}}return n},fill:function(e){var t=this;return t.elements=[],t.add(e),t},filter:function(e){var t=[],n=this,r=n.elements,i=Ext.isFunction(e)?e:function(t){return t.is(e)};return n.each(function(e,r,s){i(e,s)!==!1&&(t[t.length]=n.transformElement(e))}),n.elements=t,n},indexOf:function(e){return this.elements.indexOf(this.transformElement(e))},replaceElement:function(e,t,n){var r=isNaN(e)?this.indexOf(e):e,i;return r>-1&&(t=Ext.getDom(t),n&&(i=this.elements[r],i.parentNode.insertBefore(t,i),Ext.removeNode(i)),this.elements.splice(r,1,t)),this},clear:function(){this.elements=[]}},Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener,function(){var e,t=Ext.Element.prototype,n=Ext.CompositeElementLite.prototype;for(e in t)Ext.isFunction(t[e])&&function(e){n[e]=n[e]||function(){return this.invoke(e,arguments)}}.call(n,e)}(),Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select),Ext.Element.select=function(e,t){var n;if(typeof e=="string")n=Ext.Element.selectorFunction(e,t);else{if(e.length===undefined)throw"Invalid selector";n=e}return new Ext.CompositeElementLite(n)},Ext.select=Ext.Element.select,function(){var e="beforerequest",t="requestcomplete",n="requestexception",r=undefined,i="load",s="POST",o="GET",u=window;Ext.data.Connection=function(r){Ext.apply(this,r),this.addEvents(e,t,n),Ext.data.Connection.superclass.constructor.call(this)},Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:3e4,autoAbort:!1,disableCaching:!0,disableCachingParam:"_dc",request:function(t){var n=this;if(n.fireEvent(e,n,t)){t.el&&(Ext.isEmpty(t.indicatorText)||(n.indicatorText='<div class="loading-indicator">'+t.indicatorText+"</div>"),n.indicatorText&&(Ext.getDom(t.el).innerHTML=n.indicatorText),t.success=(Ext.isFunction(t.success)?t.success:function(){}).createInterceptor(function(e){Ext.getDom(t.el).innerHTML=e.responseText}));var i=t.params,f=t.url||n.url,l,c={success:n.handleResponse,failure:n.handleFailure,scope:n,argument:{options:t},timeout:t.timeout||n.timeout},p,d;Ext.isFunction(i)&&(i=i.call(t.scope||u,t)),i=Ext.urlEncode(n.extraParams,Ext.isObject(i)?Ext.urlEncode(i):i),Ext.isFunction(f)&&(f=f.call(t.scope||u,t));if(p=Ext.getDom(t.form)){f=f||p.action;if(t.isUpload||/multipart\/form-data/i.test(p.getAttribute("enctype")))return n.doFormUpload.call(n,t,i,f);d=Ext.lib.Ajax.serializeForm(p),i=i?i+"&"+d:d}l=t.method||n.method||(i||t.xmlData||t.jsonData?s:o);if(l===o&&n.disableCaching&&t.disableCaching!==!1||t.disableCaching===!0){var v=t.disableCachingParam||n.disableCachingParam;f=Ext.urlAppend(f,v+"="+(new Date).getTime())}return t.headers=Ext.apply(t.headers||{},n.defaultHeaders||{}),(t.autoAbort===!0||n.autoAbort)&&n.abort(),(l==o||t.xmlData||t.jsonData)&&i&&(f=Ext.urlAppend(f,i),i=""),n.transId=Ext.lib.Ajax.request(l,f,c,i,t)}return t.callback?t.callback.apply(t.scope,[t,r,r]):null},isLoading:function(e){return e?Ext.lib.Ajax.isCallInProgress(e):!!this.transId},abort:function(e){(e||this.isLoading())&&Ext.lib.Ajax.abort(e||this.transId)},handleResponse:function(e){this.transId=!1;var n=e.argument.options;e.argument=n?n.argument:null,this.fireEvent(t,this,e,n),n.success&&n.success.call(n.scope,e,n),n.callback&&n.callback.call(n.scope,n,!0,e)},handleFailure:function(e,t){this.transId=!1;var r=e.argument.options;e.argument=r?r.argument:null,this.fireEvent(n,this,e,r,t),r.failure&&r.failure.call(r.scope,e,r),r.callback&&r.callback.call(r.scope,r,!1,e)},doFormUpload:function(e,n,r){function m(){function h(e,t,n){Ext.isFunction(e)&&e.apply(t,n)}var n=this,r={responseText:"",responseXML:null,argument:e.argument},s,a;try{s=f.contentWindow.document||f.contentDocument||u.frames[o].document,s&&(s.body&&(/textarea/i.test((a=s.body.firstChild||{}).tagName)?r.responseText=a.value:r.responseText=s.body.innerHTML),r.responseXML=s.XMLDocument||s)}catch(l){}Ext.EventManager.removeListener(f,i,m,n),n.fireEvent(t,n,r,e),h(e.success,e.scope,[r,e]),h(e.callback,e.scope,[e,!0,r]),n.debugUploads||setTimeout(function(){Ext.removeNode(f)},100)}var o=Ext.id(),a=document,f=a.createElement("iframe"),l=Ext.getDom(e.form),h=[],p,d="multipart/form-data",v={target:l.target,method:l.method,encoding:l.encoding,enctype:l.enctype,action:l.action};Ext.fly(f).set({id:o,name:o,cls:"x-hidden"}),a.body.appendChild(f),Ext.fly(f).set({src:Ext.SSL_SECURE_URL}),Ext.isIE&&(document.frames[o].name=o),Ext.fly(l).set({target:o,method:s,enctype:d,encoding:d,action:r||v.action}),Ext.iterate(Ext.urlDecode(n,!1),function(e,t){p=a.createElement("input"),Ext.fly(p).set({type:"hidden",value:t,name:e}),l.appendChild(p),h.push(p)}),Ext.EventManager.on(f,i,m,this),l.submit(),Ext.fly(l).set(v),Ext.each(h,function(e){Ext.removeNode(e)})}})}(),Ext.Ajax=new Ext.data.Connection({autoAbort:!1,serializeForm:function(e){return Ext.lib.Ajax.serializeForm(e)}}),Ext.util.JSON=new function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var e=null;return function(){return e===null&&(e=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"),e}}(),pad=function(e){return e<10?"0"+e:e},doDecode=function(json){return eval("("+json+")")},doEncode=function(e){if(!Ext.isDefined(e)||e===null)return"null";if(Ext.isArray(e))return encodeArray(e);if(Ext.isDate(e))return Ext.util.JSON.encodeDate(e);if(Ext.isString(e))return encodeString(e);if(typeof e=="number")return isFinite(e)?String(e):"null";if(Ext.isBoolean(e))return String(e);var t=["{"],n,r,i;for(r in e)if(!e.getElementsByTagName)if(!useHasOwn||e.hasOwnProperty(r)){i=e[r];switch(typeof i){case"undefined":case"function":case"unknown":break;default:n&&t.push(","),t.push(doEncode(r),":",i===null?"null":doEncode(i)),n=!0}}return t.push("}"),t.join("")},m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=function(e){return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,t){var n=m[t];return n?n:(n=t.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+e+'"'},encodeArray=function(e){var t=["["],n,r,i=e.length,s;for(r=0;r<i;r+=1){s=e[r];switch(typeof s){case"undefined":case"function":case"unknown":break;default:n&&t.push(","),t.push(s===null?"null":Ext.util.JSON.encode(s)),n=!0}}return t.push("]"),t.join("")};this.encodeDate=function(e){return'"'+e.getFullYear()+"-"+pad(e.getMonth()+1)+"-"+pad(e.getDate())+"T"+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds())+'"'},this.encode=function(){var e;return function(t){return e||(e=isNative()?JSON.stringify:doEncode),e(t)}}(),this.decode=function(){var e;return function(t){return e||(e=isNative()?JSON.parse:doDecode),e(t)}}()},Ext.encode=Ext.util.JSON.encode,Ext.decode=Ext.util.JSON.decode,window.Modernizr=function(e,t,n){function r(e){m.cssText=e}function i(e,t){return r(w.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){for(var r in e){var i=e[r];if(!o(i,"-")&&m[i]!==n)return t=="pfx"?i:!0}return!1}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+S.join(r+" ")+r).split(" ");return s(t,"string")||s(t,"undefined")?u(i,t):(i=(e+" "+x.join(r+" ")+r).split(" "),a(i,t,n))}var l="2.6.2",c={},h=!0,p=t.documentElement,d="modernizr",v=t.createElement(d),m=v.style,g,y=":)",b={}.toString,w=" -webkit- -moz- -o- -ms- ".split(" "),E="Webkit Moz O ms",S=E.split(" "),x=E.toLowerCase().split(" "),T={},N={},C={},k=[],L=k.slice,A,O=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),l=t.body,c=l||t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:d+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',d,'">',e,"</style>"].join(""),f.id=d,(l?f:c).innerHTML+=s,c.appendChild(f),l||(c.style.background="",c.style.overflow="hidden",a=p.style.overflow,p.style.overflow="hidden",p.appendChild(c)),o=n(f,e),l?f.parentNode.removeChild(f):(c.parentNode.removeChild(c),p.style.overflow=a),!!o},M=function(){function e(e,i){i=i||t.createElement(r[e]||"div"),e="on"+e;var o=e in i;return o||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),o=s(i[e],"function"),s(i[e],"undefined")||(i[e]=n),i.removeAttribute(e))),i=null,o}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),_={}.hasOwnProperty,D;!s(_,"undefined")&&!s(_.call,"undefined")?D=function(e,t){return _.call(e,t)}:D=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=L.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(L.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(L.call(arguments)))};return r}),T.flexbox=function(){return f("flexWrap")},T.flexboxlegacy=function(){return f("boxDirection")},T.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},T.canvastext=function(){return!!c.canvas&&!!s(t.createElement("canvas").getContext("2d").fillText,"function")},T.webgl=function(){return!!e.WebGLRenderingContext},T.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:O(["@media (",w.join("touch-enabled),("),d,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},T.geolocation=function(){return"geolocation"in navigator},T.hashchange=function(){return M("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},T.history=function(){return!!e.history&&!!history.pushState},T.rgba=function(){return r("background-color:rgba(150,255,150,.5)"),o(m.backgroundColor,"rgba")},T.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),o(m.backgroundColor,"rgba")||o(m.backgroundColor,"hsla")},T.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(m.background)},T.backgroundsize=function(){return f("backgroundSize")},T.borderimage=function(){return f("borderImage")},T.borderradius=function(){return f("borderRadius")},T.boxshadow=function(){return f("boxShadow")},T.textshadow=function(){return t.createElement("div").style.textShadow===""},T.opacity=function(){return i("opacity:.55"),/^0.55$/.test(m.opacity)},T.cssanimations=function(){return f("animationName")},T.csscolumns=function(){return f("columnCount")},T.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return r((e+"-webkit- ".split(" ").join(t+e)+w.join(n+e)).slice(0,-e.length)),o(m.backgroundImage,"gradient")},T.cssreflections=function(){return f("boxReflect")},T.csstransforms=function(){return!!f("transform")},T.csstransforms3d=function(){var e=!!f("perspective");return e&&"webkitPerspective"in p.style&&O("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},T.csstransitions=function(){return f("transition")},T.fontface=function(){var e;return O('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0}),e},T.generatedcontent=function(){var e;return O(["#",d,"{font:0/0 a}#",d,':after{content:"',y,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},T.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n};for(var P in T)D(T,P)&&(A=P.toLowerCase(),c[A]=T[P](),k.push((c[A]?"":"no-")+A));return c.addTest=function(e,t){if(typeof e=="object")for(var r in e)D(e,r)&&c.addTest(r,e[r]);else{e=e.toLowerCase();if(c[e]!==n)return c;t=typeof t=="function"?t():t,typeof h!="undefined"&&h&&(p.className+=" "+(t?"":"no-")+e),c[e]=t}return c},r(""),v=g=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function i(e){var t=v[e[p]];return t||(t={},d++,e[p]=d,v[d]=t),t}function s(e,n,r){n||(n=t);if(m)return n.createElement(e);r||(r=i(n));var s;return r.cache[e]?s=r.cache[e].cloneNode():c.test(e)?s=(r.cache[e]=r.createElem(e)).cloneNode():s=r.createElem(e),s.canHaveChildren&&!l.test(e)?r.frag.appendChild(s):s}function o(e,n){e||(e=t);if(m)return e.createDocumentFragment();n=n||i(e);var s=n.frag.cloneNode(),o=0,u=r(),a=u.length;for(;o<a;o++)s.createElement(u[o]);return s}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function a(e){e||(e=t);var r=i(e);return g.shivCSS&&!h&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),m||u(e,r),e}var f=e.html5||{},l=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h,p="_html5shiv",d=0,v={},m;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,m=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){h=!0,m=!0}})();var g={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:f.shivCSS!==!1,supportsUnknownElements:m,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:a,createElement:s,createDocumentFragment:o};e.html5=g,a(t)}(this,t),c._version=l,c._prefixes=w,c._domPrefixes=x,c._cssomPrefixes=S,c.hasEvent=M,c.testProp=function(e){return u([e])},c.testAllProps=f,c.testStyles=O,c.prefixed=function(e,t,n){return t?f(e,t,n):f(e,"pfx")},p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+k.join(" "):""),c}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,r=function(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e};return function(i,s,o){var u=dateFormat;arguments.length==1&&Object.prototype.toString.call(i)=="[object String]"&&!/\d/.test(i)&&(s=i,i=undefined),i=i?new Date(i):new Date;if(isNaN(i))throw SyntaxError("invalid date");s=String(u.masks[s]||s||u.masks["default"]),s.slice(0,4)=="UTC:"&&(s=s.slice(4),o=!0);var a=o?"getUTC":"get",f=i[a+"Date"](),l=i[a+"Day"](),c=i[a+"Month"](),h=i[a+"FullYear"](),p=i[a+"Hours"](),d=i[a+"Minutes"](),v=i[a+"Seconds"](),m=i[a+"Milliseconds"](),g=o?0:i.getTimezoneOffset(),y={d:f,dd:r(f),ddd:u.i18n.dayNames[l],dddd:u.i18n.dayNames[l+7],m:c+1,mm:r(c+1),mmm:u.i18n.monthNames[c],mmmm:u.i18n.monthNames[c+12],yy:String(h).slice(2),yyyy:h,h:p%12||12,hh:r(p%12||12),H:p,HH:r(p),M:d,MM:r(d),s:v,ss:r(v),l:r(m,3),L:r(m>99?Math.round(m/10):m),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:o?"UTC":(String(i).match(t)||[""]).pop().replace(n,""),o:(g>0?"-":"+")+r(Math.floor(Math.abs(g)/60)*100+Math.abs(g)%60,4),S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10]};return s.replace(e,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return dateFormat(this,e,t)},Ext.ns("Bozuko.client.util"),function(){var e=/(-[a-z])/gi,t=function(e,t){return t.charAt(1).toUpperCase()},n=Ext.extend(Object,{constructor:function(e){this.cache={},this.create(e),this.sheet=document.styleSheets[document.styleSheets.length-1],n.superclass.constructor.call(this)},create:function(e){var t=Ext.DomQuery.selectNode("head");return Ext.fly(t).createChild({tag:"style",type:"text/css",id:e,title:e})},rule:function(n,r,i){if(undefined!==i){var s=r;r={},r[s]=i}var o=this.getRule(n,!0);for(var u in r){if(!r.hasOwnProperty(u))continue;var a=r[u];if(a===!1)delete o.style[u.replace(e,t)];else try{o.style[u.replace(e,t)]=a}catch(f){}}},getRule:function(e,t){if(this.cache[e])return this.cache[e];if(t===!1)return!1;var n=this.findRule(e);if(n!=null)return this._rules()[n];var r;return this.sheet.insertRule?r=this.sheet.insertRule(e+" {}",this._rules().length):(r=this._rules().length,this.sheet.addRule(e,"height: auto;")),this.cache[e]=this._rules()[r],this.cache[e]},_rules:function(){return this.sheet.cssRules||this.sheet.rules},findRule:function(e){var t=null;return Ext.each(this._rules(),function(n,r){return n.selectorText==e?(t=r,!1):!0}),t},deleteRule:function(e){var t;return(t=this.findRule(e))!==null?(this.sheet.deleteRule(t),!0):!1}});n.create=function(e){return new n(e)},Bozuko.client.util.Stylesheet=n}(),function(){var e=Math,t=function(e){return e>>0},n=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",r=/android/gi.test(navigator.appVersion),i=/iphone|ipad/gi.test(navigator.appVersion),s=/playbook/gi.test(navigator.appVersion),o=/hp-tablet/gi.test(navigator.appVersion),u="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="ontouchstart"in window&&!o,f=n+"Transform"in document.documentElement.style,l=i||s,c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,17)}}(),h=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),p="onorientationchange"in window?"orientationchange":"resize",d=a?"touchstart":"mousedown",v=a?"touchmove":"mousemove",m=a?"touchend":"mouseup",g=a?"touchcancel":"mouseup",y="translate"+(u?"3d(":"("),b=u?",0)":")",w=function(e,t){var r=this,i=document,s;r.wrapper=typeof e=="object"?e:i.getElementById(e),r.wrapper.style.overflow="hidden",r.scroller=r.wrapper.children[0],r.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(s in t)r.options[s]=t[s];r.x=r.options.x,r.y=r.options.y,r.options.useTransform=f?r.options.useTransform:!1,r.options.hScrollbar=r.options.hScroll&&r.options.hScrollbar,r.options.vScrollbar=r.options.vScroll&&r.options.vScrollbar,r.options.useTransition=l&&r.options.useTransition,r.scroller.style[n+"TransitionProperty"]=r.options.useTransform?"-"+n.toLowerCase()+"-transform":"top left",r.scroller.style[n+"TransitionDuration"]="0",r.scroller.style[n+"TransformOrigin"]="0 0",r.options.useTransition&&(r.scroller.style[n+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),r.options.useTransform?r.scroller.style[n+"Transform"]=y+r.x+"px,"+r.y+"px"+b:r.scroller.style.cssText+=";position:absolute;top:"+r.y+"px;left:"+r.x+"px",r.refresh(),r._bind(p,window),r._bind(d),a||r._bind("mouseout",r.wrapper)};w.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,handleEvent:function(e){var t=this;switch(e.type){case d:if(!a&&e.button!==0)return;t._start(e);break;case v:t._move(e);break;case m:case g:t._end(e);break;case p:t._resize();break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e)}},_resize:function(){this.refresh()},_pos:function(e,r){e=this.hScroll?e:0,r=this.vScroll?r:0,this.options.useTransform?this.scroller.style[n+"Transform"]=y+e+"px,"+r+"px"+b+" scale("+this.scale+")":(e=t(e),r=t(r),this.scroller.style.left=e+"px",this.scroller.style.top=r+"px"),this.x=e,this.y=r},_start:function(e){var t=this,r=a?e.touches[0]:e,i,s,o;if(!t.enabled)return;t.options.onBeforeScrollStart&&t.options.onBeforeScrollStart.call(t,e),t.options.useTransition&&t._transitionTime(0),t.moved=!1,t.animating=!1,t.zoomed=!1,t.distX=0,t.distY=0,t.absDistX=0,t.absDistY=0,t.dirX=0,t.dirY=0;if(t.options.momentum){t.options.useTransform?(i=getComputedStyle(t.scroller,null)[n+"Transform"].replace(/[^0-9-.,]/g,"").split(","),s=i[4]*1,o=i[5]*1):(s=getComputedStyle(t.scroller,null).left.replace(/[^0-9-]/g,"")*1,o=getComputedStyle(t.scroller,null).top.replace(/[^0-9-]/g,"")*1);if(s!=t.x||o!=t.y)t.options.useTransition?t._unbind("webkitTransitionEnd"):h(t.aniTime),t.steps=[],t._pos(s,o)}t.startX=t.x,t.startY=t.y,t.pointX=r.pageX,t.pointY=r.pageY,t.startTime=e.timeStamp||Date.now(),t.options.onScrollStart&&t.options.onScrollStart.call(t,e),t._bind(v),t._bind(m),t._bind(g)},_move:function(t){var n=this,r=a?t.touches[0]:t,i=r.pageX-n.pointX,s=r.pageY-n.pointY,o=n.x+i,u=n.y+s,f=t.timeStamp||Date.now();n.options.onBeforeScrollMove&&n.options.onBeforeScrollMove.call(n,t),n.pointX=r.pageX,n.pointY=r.pageY;if(o>0||o<n.maxScrollX)o=n.options.bounce?n.x+i/2:o>=0||n.maxScrollX>=0?0:n.maxScrollX;if(u>0||u<n.maxScrollY)u=n.options.bounce?n.y+s/2:u>=0||n.maxScrollY>=0?0:n.maxScrollY;if(n.absDistX<6&&n.absDistY<6){n.distX+=i,n.distY+=s,n.absDistX=e.abs(n.distX),n.absDistY=e.abs(n.distY);return}n.options.lockDirection&&(n.absDistX>n.absDistY+5?(u=n.y,s=0):n.absDistY>n.absDistX+5&&(o=n.x,i=0)),n.moved=!0,n._pos(o,u),n.dirX=i>0?-1:i<0?1:0,n.dirY=s>0?-1:s<0?1:0,f-n.startTime>300&&(n.startTime=f,n.startX=n.x,n.startY=n.y),n.options.onScrollMove&&n.options.onScrollMove.call(n,t)},_end:function(n){if(a&&n.touches.length!=0)return;var r=this,i=a?n.changedTouches[0]:n,s,o,u={dist:0,time:0},f={dist:0,time:0},l=(n.timeStamp||Date.now())-r.startTime,c=r.x,h=r.y,p;r._unbind(v),r._unbind(m),r._unbind(g),r.options.onBeforeScrollEnd&&r.options.onBeforeScrollEnd.call(r,n);if(!r.moved){if(a){s=i.target;while(s.nodeType!=1)s=s.parentNode;s.tagName!="SELECT"&&s.tagName!="INPUT"&&s.tagName!="TEXTAREA"&&(o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!0,n.view,1,i.screenX,i.screenY,i.clientX,i.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),o._fake=!0,s.dispatchEvent(o))}r._resetPos(200),r.options.onTouchEnd&&r.options.onTouchEnd.call(r,n);return}if(l<300&&r.options.momentum){u=c?r._momentum(c-r.startX,l,-r.x,r.scrollerW-r.wrapperW+r.x,r.options.bounce?r.wrapperW:0):u,f=h?r._momentum(h-r.startY,l,-r.y,r.maxScrollY<0?r.scrollerH-r.wrapperH+r.y:0,r.options.bounce?r.wrapperH:0):f,c=r.x+u.dist,h=r.y+f.dist;if(r.x>0&&c>0||r.x<r.maxScrollX&&c<r.maxScrollX)u={dist:0,time:0};if(r.y>0&&h>0||r.y<r.maxScrollY&&h<r.maxScrollY)f={dist:0,time:0}}if(u.dist||f.dist){p=e.max(e.max(u.time,f.time),10),r.scrollTo(t(c),t(h),p),r.options.onTouchEnd&&r.options.onTouchEnd.call(r,n);return}r._resetPos(200),r.options.onTouchEnd&&r.options.onTouchEnd.call(r,n)},_resetPos:function(e){var t=this,n=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,r=t.y>=0||t.maxScrollY>0?0:t.y<t.maxScrollY?t.maxScrollY:t.y;if(n==t.x&&r==t.y){t.moved&&(t.options.onScrollEnd&&t.options.onScrollEnd.call(t),t.moved=!1);return}t.scrollTo(n,r,e||0)},_mouseout:function(e){var t=e.relatedTarget;if(!t){this._end(e);return}while(t=t.parentNode)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind("webkitTransitionEnd"),t._startAni()},_startAni:function(){var t=this,n=t.x,r=t.y,i=Date.now(),s,o,u;if(t.animating)return;if(!t.steps.length){t._resetPos(400);return}s=t.steps.shift(),s.x==n&&s.y==r&&(s.time=0),t.animating=!0,t.moved=!0;if(t.options.useTransition){t._transitionTime(s.time),t._pos(s.x,s.y),t.animating=!1,s.time?t._bind("webkitTransitionEnd"):t._resetPos(0);return}u=function(){var a=Date.now(),f,l;if(a>=i+s.time){t._pos(s.x,s.y),t.animating=!1,t.options.onAnimationEnd&&t.options.onAnimationEnd.call(t),t._startAni();return}a=(a-i)/s.time-1,o=e.sqrt(1-a*a),f=(s.x-n)*o+n,l=(s.y-r)*o+r,t._pos(f,l),t.animating&&(t.aniTime=c(u))},u()},_transitionTime:function(e){this.scroller.style[n+"TransitionDuration"]=e+"ms"},_momentum:function(n,r,i,s,o){var u=6e-4,a=e.abs(n)/r,f=a*a/(2*u),l=0,c=0;return n>0&&f>i?(c=o/(6/(f/a*u)),i+=c,a=a*i/f,f=i):n<0&&f>s&&(c=o/(6/(f/a*u)),s+=c,a=a*s/f,f=s),f*=n<0?-1:1,l=a/u,{dist:f,time:t(l)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent)t-=e.offsetLeft,n-=e.offsetTop;return{left:t,top:n}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var e=this;e.scroller.style[n+"Transform"]="",e._unbind(p,window),e._unbind(d),e._unbind(v),e._unbind(m),e._unbind(g),e._unbind("mouseout",e.wrapper),e.options.useTransition&&e._unbind("webkitTransitionEnd"),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var e=this,t;e.wrapperW=e.wrapper.clientWidth,e.wrapperH=e.wrapper.clientHeight,e.scrollerW=e.scroller.offsetWidth,e.scrollerH=e.scroller.offsetHeight,e.maxScrollX=e.wrapperW-e.scrollerW,e.maxScrollY=e.wrapperH-e.scrollerH,e.dirX=0,e.dirY=0,e.hScroll=e.options.hScroll&&e.maxScrollX<0,e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH),t=e._offset(e.wrapper),e.wrapperOffsetLeft=-t.left,e.wrapperOffsetTop=-t.top,e.scroller.style[n+"TransitionDuration"]="0",e._resetPos(200)},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop(),s.length||(s=[{x:e,y:t,time:n,relative:r}]);for(o=0,u=s.length;o<u;o++)s[o].relative&&(s[o].x=i.x-s[o].x,s[o].y=i.y-s[o].y),i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0});i._startAni()},scrollToElement:function(t,n){var r=this,i;t=t.nodeType?t:r.scroller.querySelector(t);if(!t)return;i=r._offset(t),i.left+=r.wrapperOffsetLeft,i.top+=r.wrapperOffsetTop,i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left,i.top=i.top>0?0:i.top<r.maxScrollY?r.maxScrollY:i.top,n=n===undefined?e.max(e.abs(i.left)*2,e.abs(i.top)*2):n,r.scrollTo(i.left,i.top,n)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(v),this._unbind(m),this._unbind(g)},enable:function(){this.enabled=!0},stop:function(){h(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1}},typeof exports!="undefined"?exports.iScroll=w:window.iScroll=w}(),function(){var e=Ext.Element.prototype.setStyle;Ext.Element.prototype.setStyle=function(t,n){try{return e.apply(this,arguments)}catch(r){return this}};var t=0;Ext.Element.prototype.update=function(e,n,r){var i=this,s,o,u;return i.dom?(e=e||"",o=i.dom,n!==!0?(o.innerHTML=e,r&&r(i),i):(s="ext-"+t++,e+='<span id="'+s+'"></span>',u=setInterval(function(){if(!document.getElementById(s))return!1;clearInterval(u);var t=document,n=t.getElementsByTagName("head")[0],o=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,a=/\ssrc=([\'\"])(.*?)\1/i,f=/\stype=([\'\"])(.*?)\1/i,l,c,h,p,d,v;while(l=o.exec(e))c=l[1],h=c?c.match(a):!1,h&&h[2]?(v=t.createElement("script"),v.src=h[2],p=c.match(f),p&&p[2]&&(v.type=p[2]),n.appendChild(v)):l[2]&&l[2].length>0&&(window.execScript?window.execScript(l[2]):window.eval(l[2]));d=t.getElementById(s),d&&d.parentNode.removeChild(d),r&&r(i)},20),o.innerHTML=e.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,""),i)):i};var n=Ext.Element.prototype.getValue;Ext.Element.prototype.getValue=function(){if(this.dom.tagName!="select")return n.apply(this,arguments);var e=!1;return this.select("option").each(function(t){return t.getAttribute("selected")?(e=t.getValue(),!1):!0}),e},Ext.Element.prototype.setValue=function(e){this.dom.tagName!="select"&&(this.dom.value=e);var t=this.child('option[value="'+e+'"]');return t&&(t.dom.selected=!0),e},Ext.iterate=function(e,t,n){if(Ext.isEmpty(e))return;if(Ext.isIterable(e)){Ext.each(e,t,n);return}if(Ext.isObject(e))for(var r in e)try{if(!e.hasOwnProperty||e.hasOwnProperty(r))if(t.call(n||e,r,e[r],e)===!1)return}catch(i){}}}(),Ext.ns("Bozuko.util"),Bozuko.util.ISODate={convert:function(e){if(typeof e!="string")throw"ISODate, convert: input must be a string";var t=e.match(/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(([+-])(\d{2}):(\d{2})))$/i);if(!t)throw"ISODate, convert: Illegal format";return new Date(Date.UTC(t[1],t[2]-1,t[3],t[4],t[5],t[6]|0,t[6]*1e3-(t[6]|0)*1e3|0,t[7])+(t[7].toUpperCase()==="Z"?0:(t[10]*3600+t[11]*60)*(t[9]==="-"?1e3:-1e3)))},format:function(e,t){typeof e=="string"&&(e=this.convert(e));if(e instanceof Date)return e=t?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()]:[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()],this.month[e[1]]+" "+this.ordinal(e[2])+", "+e[0]+" @ "+this.clock12(e[3],e[4]);throw"ISODate, format: t is not a date object"},month:["January","February","March","April","May","June","July","August","September","October","November","December"],ordinal:function(e){return e+["th","st","nd","rd"][(e%100/10|0)===1?0:e%10<4?e%10:0]},clock12:function(e,t,n){e%=24;var r=e%12;return r===0&&(r=12),r+":"+(t<10?"0"+t:t)+(isFinite(n)?":"+(n<10?"0"+n:n):"")+(e<12?"AM":"PM")}},function(){var e=Ext.EventManager.addListener,t=Ext.EventManager.removeListener;Ext.EventManager.on=Ext.EventManager.addListener=function(t,n,r,i,s){(n=="click"||n=="mousedown")&&e(t,"touchstart",r,i,s),e(t,n,r,i,s)},Ext.EventManager.un=Ext.EventManager.removeListener=function(e,n,r,i){(n=="click"||n=="mousedown")&&t(e,"touchstart",r,i),t(e,n,r,i)}}(),Ext.ns("Bozuko.client.util"),function(){function f(){if(!r){var e=Ext.get(document.body).createChild({style:"position: absolute; top:-200px; left: -200px; width: 50px; height: 50px; overflow: hidden;",cn:[{tag:"div",style:"height: 100px"}]}),t=e.child("div").dom;t.innerHTML=".";var n=e.child("div").getWidth();e.setStyle("overflow-y","scroll");var i=e.child("div").getWidth();r=n-i,e.remove()}return r}function l(e){if(e.browserEvent&&e.type&&e.browserEvent){if(e.browserEvent.touches&&e.browserEvent.touches.length)return e.browserEvent.touches;if(e.browserEvent.changedTouches&&e.browserEvent.changedTouches.length)return e.browserEvent.changedTouches}return e.touches}var e=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),t=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),r,i=window.navigator.userAgent.match(/(android|i(phone|pad|pod))/i)&&"ontouchstart"in window,s=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",o="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,u="translate"+(o?"3d(":"("),a=o?",0)":")",c=Ext.extend(Ext.util.Observable,{padding:2,x:0,y:0,constructor:function(e,t){Ext.apply(this,t),this.$el=Ext.get(e),c.superclass.constructor.call(this),this.init()},init:function(){var e=this;this.$scroller=this.$el.child(".scrollable");if(!this.$scroller)return;this.updateSize(),this.$el.addClass("superscroll"),this.$scrollbars={},this.horizontal!==!1&&(this.horizontal=new h.Horizontal(this)),this.vertical!==!1&&(this.vertical=new h.Vertical(this)),i&&(this.$scroller.dom.style[s+"TransitionProperty"]="-"+s.toLowerCase()+"-transform",this.$scroller.dom.style[s+"TransitionDuration"]="0",this.$scroller.dom.style[s+"TransformOrigin"]="0 0",this.$scroller.dom.style[s+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)",this.$scroller.dom.style[s+"Transform"]=u+"0px,0px"+a,this.$scroller.on("touchstart",this.onTouchStart,this))},getScroll:function(e){return e=="left"?this.x:this.y},updateSize:function(){var e=f();this.$el.removeClass("superscroll"),this.$el.setStyle("height","auto"),this.$scroller.setStyle({width:"",height:""}),this.fixSize&&this.fixSize();if(i)return;this.$scroller.setStyle({width:this.$el.getWidth()-this.$scroller.getPadding("lr")+e+"px",height:this.$el.getHeight()-this.$scroller.getPadding("tb")+e+"px"}),this.$el.addClass("superscroll")},update:function(e){e||this.updateSize(),this.vertical&&this.vertical.update(),this.horizontal&&this.horizontal.update()},translate:function(){this.$scroller.dom.style[s+"Transform"]=u+ -this.x+"px,"+ -this.y+"px"+a,this.update(!0),this.deferHideScrollbars()},showScrollbars:function(){this.vertical&&this.vertical.show(),this.horizontal&&this.horizontal.show()},hideScrollbars:function(){this.vertical&&this.vertical.hide(),this.horizontal&&this.horizontal.hide()},deferHideScrollbars:function(){this.vertical&&this.vertical.deferHide(),this.horizontal&&this.horizontal.deferHide()},onTouchStart:function(e){this.animating&&(t(this.animateTimeout),this.animating=!1);var n=l(e),r=n[0];this.startPosition=[r.pageX,r.pageY],this.startScroll=[this.x,this.y],this.showScrollbars(),this.$scroller.on("touchmove",this.onTouchMove,this),this.$scroller.on("touchend",this.onTouchEnd,this)},onTouchMove:function(e){e.preventDefault();var t=l(e),n=t[0],r=[this.$scroller.dom.scrollWidth-this.$el.getWidth(),this.$scroller.dom.scrollHeight-this.$el.getHeight()],i=[n.pageX,n.pageY];this.vertical!==!1&&(this.y=Math.max(0,Math.min(r[1],this.y+this.startPosition[1]-i[1]))),this.horizontal!==!1&&(this.x=Math.max(0,Math.min(r[0],this.x+this.startPosition[0]-i[0]))),this.lastPosition=this.startPosition,this.startPosition=i,this.lastTouch=Date.now(),this.translate()},onTouchEnd:function(e){e.preventDefault();var t=l(e),n=t[0],r=Date.now(),i=[this.$scroller.dom.scrollWidth-this.$el.getWidth(),this.$scroller.dom.scrollHeight-this.$el.getHeight()],s=[n.pageX,n.pageY];if(this.lastTouch&&r-this.lastTouch<200){var o=0,u=0;this.vertical!==!1&&(u=Math.max(0,Math.min(i[1],this.y+this.startPosition[1]-s[1]))),this.horizontal!==!1&&(o=Math.max(0,Math.min(i[0],this.x+this.startPosition[0]-s[0])));var a=[s[0]-this.lastPosition[0],s[1]-this.lastPosition[1]],f=[this.momentum(a[0],r-this.lastTouch,i[0]),this.momentum(a[1],r-this.lastTouch,i[1])];this.animate(f)}this.deferHideScrollbars(),this.$scroller.un("touchmove",this.onTouchMove,this),this.$scroller.un("touchend",this.onTouchEnd,this)},momentum:function(e,t,n){var r=6e-4,i=Math.abs(e)/t,s=i*i/(2*r),s=s*(e<0?-1:1);return newTime=i/r,{dist:s,time:Math.round(newTime)}},animate:function(r){var i=Date.now(),o=this,u=[this.$scroller.dom.scrollWidth-this.$el.getWidth(),this.$scroller.dom.scrollHeight-this.$el.getHeight()],a=[Number(this.x),Number(this.y)],f=function(){if(!o.animating){t(o.animateTimeout);return}var n=Date.now()-i,s=!0;if(o.horizontal&&n<r[0].time){var c=Math.max(0,Math.min(u[0],a[0]-l(n,0,r[0].dist,r[0].time)));c!=o.x&&(s=!1),o.x=c}if(o.vertical&&n<r[1].time){var h=Math.max(0,Math.min(u[1],a[1]-l(n,0,r[1].dist,r[1].time)));h!=o.y&&(s=!1),o.y=h}o.translate(),s?o.animating=!1:o.animateTimeout=e(f)},l=function(e,t,r,i){return-r*(e/=i)*(e-2)+t};this.animating=!0,this.animateTimeout=e(f)}}),h=Ext.extend(Object,{constructor:function(e,t){Ext.apply(this,t),this.panel=e,this.dragging=!1,this.enter=!1,this.shown=!1,this.panel.$el.on("mouseenter",this.onMouseEnter,this),this.panel.$el.on("mouseleave",this.onMouseLeave,this),this.el.on("mousedown",this.onMouseDown,this),i&&(this.el.dom.style[s+"TransitionProperty"]="-"+s.toLowerCase()+"-transform",this.el.dom.style[s+"TransitionDuration"]="0",this.el.dom.style[s+"TransformOrigin"]="0 0",this.el.dom.style[s+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),this.panel.$scroller.on("scroll",this.onScroll,this)},onMouseEnter:function(){this.enter=!0,this.show()},onMouseLeave:function(){this.enter=!1,this.dragging||this.hide()},onMouseDown:function(e){e.preventDefault(),this.dragging=!0,this.startPageY=e.getPageY()-this.el.getTop(!0),this.startPageX=e.getPageX()-this.el.getLeft(!0),document.onselectstart=function(){return!1};var t=Ext.get(document),n=this;t.on("mousemove",n.onMouseMove,n),t.on("mouseup",function(){n.dragging=!1,document.onselectstart=null,t.un("mousemove",n.onMouseMove,n),n.enter||n.hide()})},onMouseMove:function(e){var t=this.capitalize(this.dimension),n=this.capitalize(this.position),r=this.position=="top"?"Y":"X",i="get"+t,s=this.panel.$el[i](),o=s-this.panel.padding*2,u=e["getPage"+r]()-this["startPage"+r],a=this.el[i](),f=this.panel.$scroller,l=Math.min(Math.max(u,0),o-a);f.dom["scroll"+n]=(f.dom["scroll"+t]-s)*l/(o-a)},onScroll:function(){this.shown||(this.show(),!this.enter&&!this.dragging&&(this.hiding=this.hide.defer(1500,this))),this.panel.x=this.panel.$scroller.dom.scrollLeft,this.panel.y=this.panel.$scroller.dom.scrollTop,this.update()},deferHide:function(){this.hiding&&clearTimeout(this.hiding),this.hiding=this.hide.defer(1500,this)},capitalize:function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},update:function(){var e=this.capitalize(this.dimension),t=this.capitalize(this.position),n="get"+e,r=this.panel.$el[n](),o=r-this.panel.padding*2,f=this.panel.$scroller,l=f.dom["scroll"+e],c=this.panel.getScroll(this.position),h={};if(i){var p=this.el[n](),d=o*r/l;p!=d&&(h[this.dimension]=d+"px"),this.position=="left"?h[s+"Transform"]=u+o*c/l+"px,"+ -this.y+"px"+a:h[s+"Transform"]=u+"0px,"+o*c/l+"px"+a}else h[this.dimension]=o*r/l+"px",h[this.position]=o*c/l+"px";this.el.setStyle(h)},show:function(){if(!this.shown){var e=this.capitalize(this.dimension),t="get"+e;if(this.panel.$scroller.dom["scroll"+e]<=this.panel.$el[t]())return;this.update(),this.el.addClass("superscroll-bar-shown"),this.hiding&&(clearTimeout(this.hiding),this.hiding=null),this.shown=!0}},hide:function(){this.shown&&(this.el.removeClass("superscroll-bar-shown"),this.shown=!1)}});h.Horizontal=Ext.extend(h,{dimension:"width",position:"left",constructor:function(e){this.el=e.$el.createChild({cls:"superscroll-bar superscroll-bar-horizontal"}),h.Horizontal.superclass.constructor.apply(this,arguments)}}),h.Vertical=Ext.extend(h,{dimension:"height",position:"top",constructor:function(e){this.el=e.$el.createChild({cls:"superscroll-bar superscroll-bar-vertical"}),h.Horizontal.superclass.constructor.apply(this,arguments)}}),Ext.Element.prototype.superScroll=function(e){return this._superScroll?this._superScroll:(this._superScroll=new Bozuko.client.util.SuperScroll(this,e),this._superScroll)},Bozuko.client.util.SuperScroll=c,Bozuko.client.util.SuperScroll.Scrollbar=h}(),Ext.ns("Bozuko.client.util"),Bozuko.client.util.Cookies=function(){function t(e){var t=document.cookie.indexOf(";",e);return t==-1&&(t=document.cookie.length),unescape(document.cookie.substring(e,t))}var e=function(){};return e.prototype={set:function(e,t){var n=arguments,r=arguments.length,i=r>2?n[2]:null,s=r>3?n[3]:"/",o=r>4?n[4]:null,u=r>5?n[5]:!1;console.log(i),document.cookie=e+"="+escape(t)+(i===null?"":"; expires="+i.toGMTString())+(s===null?"":"; path="+s)+(o===null?"":"; domain="+o)+(u===!0?"; secure":"")},get:function(e){var n=e+"=",r=n.length,i=document.cookie.length,s=0,o=0;while(s<i){o=s+r;if(document.cookie.substring(s,o)==n)return t(o);s=document.cookie.indexOf(" ",s)+1;if(s===0)break}return null},clear:function(e,t){this.get(e)&&(t=t||"/",document.cookie=e+"="+"; expires=Thu, 01-Jan-70 00:00:01 GMT; path="+t)},each:function(){}},new e}(),Ext.ns("Bozuko.client.util.Cache"),Bozuko.client.util.Cache=function(){var e=function(e){this.cache=e,this.init()};e.prototype.init=function(){};var t=Ext.extend(e,{init:function(){this.key="BozukoClient",this.cache.on("set",this.update,this),this.cache.on("del",this.update,this),this.cache.on("clear",this.clear,this);try{var e=window.localStorage.getItem(this.key);e&&this.cache.setData(Ext.decode(e))}catch(t){}},update:function(){try{this.clear(),window.localStorage.setItem(this.key,Ext.encode(this.cache.getData()))}catch(e){}},clear:function(){try{window.localStorage.removeItem(this.key)}catch(e){}}}),n=Ext.extend(e,{init:function(){this._prefix="_client_",this._regexp=new RegExp("(?:^|;\\s*)"+this._prefix+"([^\\s\\=]*?)"+"\\s*\\=","g"),this.cache.on("set",this.set,this),this.cache.on("del",this.del,this),this.cache.on("clear",this.clear,this);var e={},t=this.getAllKeys();for(var n=0;n<t.length;n++)e[t[n]]=this.get(t[n]);this.cache.setData(e)},getAllKeys:function(){var e=document.cookie.match(this._regexp),t=[];if(e)for(var n=0;n<e.length;n++){var r=e[n].replace(/^;\s*/,"").replace(/\s*=$/,"");r.indexOf(this._prefix)===0&&(t[t.length]=r.substr(this._prefix.length))}return t},get:function(e){var t=Bozuko.client.util.Cookies.get(this._prefix+e);try{return Ext.decode(t)}catch(n){return!1}},set:function(e,t,n){var r=new Date(Date.now()+864e5);Bozuko.client.util.Cookies.set(this._prefix+t,Ext.encode(n),r)},del:function(e,t,n){Bozuko.client.util.Cookies.clear(this._prefix+t)},clear:function(e){var t=this.getAllKeys();for(var n=0;n<t.length;n++)this.del(t[n])}}),r=Ext.extend(Ext.util.Observable,{constructor:function(){this._data={},this.addEvents({set:!0,get:!0,del:!0,clear:!0}),r.superclass.constructor.call(this),this._adapter=window.localStorage?new t(this):new n(this)},getData:function(){return this._data},setData:function(e){this._data=e},set:function(e,t){this._data[e]=t,this.fireEvent("set",this,e,t,this._data)},get:function(e){return this._data[e]},del:function(e){delete this._data[e],this.fireEvent("del",this,e,this._data)},clear:function(){this._data={},this.fireEvent("clear",this,this._data)}});return new r}(),Ext.namespace("Bozuko.client.lib"),Bozuko.client.lib.Api=Ext.extend(Ext.util.Observable,{token:null,mobile_version:"html5-1.0",constructor:function(e){var t=this;if(e)t.base=e;else{var n=window.location;t.base=n.protocol+"//"+n.host}t.stack=[],t.history=[],t.addEvents({beforecall:!0,aftercall:!0,success:!0,failure:!0}),Bozuko.client.lib.Api.superclass.constructor.call(this)},setToken:function(e){this.token=e},buildParams:function(e){return e=e||{},e.mobile_version="html5-1.0",this.token&&(e.token=this.token),e},call:function(e,t){if(this._requesting){this.stack.push(arguments);return}typeof e=="function"?(t=e,e={}):typeof e=="string"&&(e={path:e});var n=this,r=e.method||"get",i=e.link||null,s=e.scope||this,o=e.data||e.params||{},u=e.path||"/api";options={attempt:e.attempt||0,link:i,path:u,url:n.base+u,method:(r=="del"?"delete":r).toUpperCase(),callback:n.handleResponse,scope:n,user_scope:s||n,user_callback:t},o=n.buildParams(o),options.params=o,options.url+=(options.url.indexOf("?")!=-1?"&":"?")+"_dc"+"="+(new Date).getTime(),this.fireEvent("beforecall",options),this._requesting=!0,Ext.Ajax.request(options)},handleResponse:function(e,t,n){var r=this,i;try{i=Ext.decode(n.responseText)}catch(s){i={}}i.links||(i.links={});var o={timestamp:new Date,response:n,status:n.status,path:e.path,link:e.link,options:e,data:i,ok:n.status==200};r.history.push(o),r.fireEvent("aftercall",o,e.user_scope),r.fireEvent(t?"success":"failure",o,e.user_scope),e.user_callback&&e.user_callback.apply(e.user_scope,[o]),r._requesting=!1,r.stack.length&&r.call.apply(r,r.stack.shift())},last:function(){return this.history[this.history.length-1]},getAt:function(e){return this.history[e]}}),Ext.namespace("Bozuko.client.game"),Bozuko.client.game.Abstract=Ext.extend(Ext.util.Observable,{width:320,height:415,useCache:!1,autoPlay:!0,lang:{loading:{entry:"Loading...",result:"Loading...",user:"Loading User..."},agreeToOfficialRules:"I agree to the Official Rules below.",officialRules:"Official Rules",availablePrizes:"Available Prizes",myPrizes:"My Prizes",backToGame:"Back to game",shareThisGame:"Share This Game!",visitFacebookPage:"Visit our Facebook Page",youWin:"You Win!",prizeDetails:"Prize Details",sentEmail:'<p>This prize has been emailed to <strong class="user-email">{0}</strong>! Please ensure it didn\'t land in your spam folder.</p>'},constructor:function(e){this.config=e,this.state=null,this._images={},this._srcs={},this._imagesLoaded=0,this._imageCount=0,this._ready=!1,this._playing=!1,Ext.apply(this,e),this.addEvents({render:!0,ready:!0,result:!0,beforeresult:!0,afterresult:!0,win:!0,lose:!0,load:!0,enter:!0,displaywin:!0,displaylose:!0,statechange:!0}),Bozuko.client.game.Abstract.superclass.constructor.call(this,e),this.on("render",function(){this.app.fireEvent("render_game",this,this.app)},this),this.app.fireEvent("filter_game",this),this._saved={state:this.getCache("state"),game_result:this.getCache("game_result")},this.registerLoader(),this.on("displaywin",this.onDisplayWin,this),this.app.on("user",this.onUserState,this),this.app.on("nouser",this.onUserState,this),this.app.on("logout",this.onLogout,this)},onLogout:function(){var e=this;this.state=!1,this.game_result=!1},onDisplayWin:function(e){if(!e.prize)return;if(!(e.prize.address_required||e.prize.is_pdf||e.prize.is_email||e.prize.is_barcode||this.app.email_only)||!e.prize.links.redeem)return;var t=this,n=function(r){r=r||0,t.app.api.call({path:e.prize.links.redeem,method:"post",params:{message:"",share:!1,email_prize_screen:!0}},function(e){e.ok||r<5&&n(r+1),t._showingYouWin&&t.showYouWin()})};n()},addImage:function(e,t,n,r){var i=this;if(this._images[e])return;var s=this._images[e]=new Image;s.onload=function(){i._imagesLoaded++,s.loaded=!0,i._imagesLoaded==i._imageCount&&(i._ready=!0,i.fireEvent("ready",i)),n&&n instanceof Function&&n(this)},this._srcs[e]=t,this._imageCount++;if(r||n===!0)s.src=t},isReady:function(){return this._ready},loadImages:function(e){for(var t in this._srcs){var n=this._images[t];if(!n.loaded){var r=this._srcs[t];r.match(/^data/i)||(r+=(~r.indexOf("?")?":":"?")+"dc="+this.app.config.cache_time),n.src=r}}},image:function(e){return this._images[e]},load:function(){var e=this;if(!e.rendered){e.on("render",function(){e.load()});return}this.updateDescription(),this.updateState(!0,function(t){if(!t.ok){e.updateAction("Error");return}e.app.scrollToTop(),e.showDescription(),e.app.hideLoading()})},updateActionFromState:function(){var e=this,t=e.getDescription().$shareButtons;t.setStyle("display","none");if(e.state.button_enabled===!1)if(!e.state.button_text.match(/(this game starts|thanks for playing|this game has ended)/i)&&!e.state.next_enter_time_ms&&(e.game.entry_method.type=="facebook/like"||e.game.entry_method.type=="facebook/likecheckin")){if(e.getDescription().child("iframe.like-button-frame"))return;var n=e.page.like_button_url;n+="?token="+e.app.user.token,n+="&game="+e.game.id,e.updateAction('<div style="line-height: 26px;" class="like-container like-container-loading">'+e.state.button_text+'<span class="like-loading">'+'<span class="loading">&nbsp;</span>'+"</span>"+'<iframe id="likeFrame" name="likeFrame" src="'+n+'" frameborder="0" scrolling="no" class="like-button-frame"></iframe>'+"</div>");var r=e.getDescription().child(".like-container"),i=0,s=e.getDescription().child(".like-loading .loading"),o=setInterval(function(){s.setStyle("background-position",-i*16+"px 0"),i++,i>7&&(i=0)},100);window.notifyFn=function(t){switch(t){case"facebook/like_loaded":clearInterval(o),r.removeClass("like-container-loading");break;case"facebook/liked":e.updateState(!0)}}}else e.updateAction(e.state.button_text),e.state.button_text.match(/(thanks for playing|play again in|this game has ended)/i)&&(t.setStyle("display","block"),e.state.button_text.match(/(thanks for playing|this game has ended)/i)?t.addClass("game-over"):t.removeClass("game-over"));else e.button()},next:function(e){var t=this;e=e&&typeof e=="function"?e:function(){};if(!t.state.button_enabled||t.state.button_action=="enter")t.updateActionFromState(),t.showDescription(),e(!1);else{if(this.useCache&&this._saved&&this._saved.state&&this._saved.state.user_tokens==t.state.user_tokens){var n=this._saved.game_result;n&&(this.game_result=n,this.fireEvent("result",this.game_result),e(!0)),this._saved=!1;return}t.state.button_action=="play"&&t.autoPlay?t.result(function(){e()}):e(!0)}},button:function(){var e=this;e.updateAction([{cls:"button",tag:"a",html:e.state.button_text||"Play"},{cls:"agree",html:this.lang.agreeToOfficialRules}]);var t=e.getDescription().child(".actions .action"),n=function(){if(e.state.button_action=="enter"){e.enter();return}e.state.user_tokens&&e.app.useDefaultLoader(),e.next(function(t){t&&e.app.unmask()})};t.child(".button").dom.onclick=n},updateState:function(e,t){typeof e=="function"&&(t=e,e=!1);var n=this,r=e?this.game.game_state.links.game:this.game.game_state.links.game_state;n.app.api.call(r,function(r){if(!r.ok){t&&typeof t=="function"&&t(r);return}e?(n.setState(r.data.game_state),n.game=r.data,n.$description&&n.updateDescription()):n.setState(r.data),n.updateActionFromState(),t&&typeof t=="function"&&t(r)})},updateAction:function(e){var t=this.getDescription().child(".actions .action");if(Ext.isString(e))return t.update(e),this._loader.$el.child(".bd").superScroll().update(),this;t.update("");if(e.length)for(var n=0;n<e.length;n++)t.createChild(e[n]);else t.createChild(e);return this._loader.$el.child(".bd").superScroll().update(),this},getDescription:function(){var e=this;if(!this.$description){var t=Modernizr.touch,n=function(e){return e.protocol+"//"+e.host+e.pathname+"?share-button=1"}(window.location);this.$description=this.app.createModal({cls:"game-description page-window modal-window-full",cn:[{cls:"user top-bar",html:this.lang.loading.user},{cls:"hd",cn:[{cls:"page-pic"},{cls:"content",cn:[{cls:"name",cn:[{tag:"span",html:this.game.name}]},{cls:"instructions"}]}]},{cls:"actions",cn:[{cls:"action"},{cls:"loader",cn:[{cls:"loading-text"}]},{cls:"share-buttons",cn:[{tag:"ul",cls:"links",cn:[{tag:"li",cls:"share",cn:[{tag:"a",target:"_blank",href:"http://"+(t?"m":"www")+".facebook.com/sharer.php?"+"u="+encodeURIComponent(n)+"&display=popup",html:this.lang.shareThisGame,cls:"share-btn"}]},{tag:"li",cls:"facebook",cn:[{tag:"a",target:"_blank",href:this.page.facebook_page,html:this.lang.visitFacebookPage,cls:"facebook"}]}]}]}]},{cls:"bd",cn:[{cls:"scrollable",cn:[{cls:"above-prizes"},{cls:"section prizes",cn:[{tag:"h4",html:this.lang.availablePrizes},{tag:"ul",cls:"bubble"}]},{cls:"section copy",cn:[{cls:"content"}]},{cls:"section terms",cn:[{tag:"h4",html:this.lang.officialRules},{cls:"bubble"}]}]}]}]}),this.$description.$shareButtons=this.$description.child(".share-buttons"),this.$description.$shareButtons.setVisibilityMode(Ext.Element.DISPLAY),this.$copySection=this.$description.child(".section.copy"),this.$copySection.setVisibilityMode(Ext.Element.DISPLAY),this.$copySection.hide();var r=this.$description.$shareButtons.child(".share-btn");r.on("click",function(n){window._gaq&&_gaq.push(["_trackEvent","Web Game","Share",e.game.name+": "+e.game.id]),n.stopEvent();var r={method:"feed",place:e.page.facebook_id,caption:e.page.name,link:e.game.share_url,name:e.game.share_title,description:e.game.share_description,picture:e.page.image};t||(r.display="popup"),FB.ui(r,function(t){t&&t.post_id&&e.app.api.call({path:"/game/"+e.game.id+"/shared/"+t.post_id,method:"post"},function(e){})})}),this.squareImage(this.$description.child(".page-pic"),this.page.image),this.updateDescription();var i=this.$description.show;this.$description.show=function(){i.apply(this,arguments);var t=e.$description.child(".bd");e.$description.child(".bd").superScroll({horizontal:!1,fixSize:function(){t.setHeight(e.$description.getHeight(!0)+4-(t.getXY()[1]-e.$description.getXY()[1]))}})},this.app.fireEvent("filter_game_description",this.$description,this)}return this.$description},updateDescription:function(){var e=this,t=this.getDescription(),n=this.game.entry_method.description.split("\n");n.shift(),n[0]="<strong>"+n[0]+"</strong>",t.child(".instructions").update(n.join("<br />"));var r=t.child(".prizes ul");r.update(""),this.fireEvent("updatedescription",t);var i=this.game.prizes;this.game.consolation_prizes&&!this.game.hide_consolations&&(i=i.concat(this.game.consolation_prizes));for(var s=0;s<i.length;s++){var o=i[s],u=r.createChild({tag:"li",cn:[{cls:"name",cn:[{tag:"span",html:o.name}]},{cls:"description",html:o.description}]});if(o.result_image){var a=u.child(".name").createChild({tag:"img",src:o.result_image,cls:"result-image"});u.child(".name").insertFirst(a)}o.description&&function(e){var t=e.child(".name").createChild({cls:"trigger"});e.child(".name").insertFirst(t),e.addClass("has-description");var n=function(t){t.stopEvent(),e.toggleClass("show-description")};t.on(Modernizr.touch?"touchstart":"mousedown",n,this)}(u)}this.game.ingame_copy?this._ingame_copy||(this.$copySection.child(".content").update(this.game.ingame_copy,!0),this.$copySection.show(),this._ingame_copy=!0):(this.$copySection.child(".content").update(""),this.$copySection.hide());var f=this.game.rules.replace(/\n/g,"<br />").replace(/(www\..+\.com)/ig,"http://$1").replace(/(\b(https?):\/\/[\-A-Z0-9+&@#\/%?=~_|!:,.;]*[\-A-Z0-9+&@#\/%=~_|])/ig,'<a target="_blank" href="$1">$1</a>').replace(/([\-A-Z0-9+_.]+?@[\-A-Z0-9+&@#\/%?=~_|!:,.;]*[\-A-Z0-9+&@#\/%=~_|])/ig,'<a href="mailto:$1">$1</a>');t.child(".terms .bubble").update(f)},onUserState:function(){var e=this,t=this.getDescription();this.app.user?(t.child(".user").update('<ul class="user-links"><li class="my-prizes-li" style="display: none;"><a href="javascript:;" class="my-prizes">'+this.lang.myPrizes+'</a></li><li><a class="logout" href="javascript:;">Logout</a></li></ul><div class="name">Hi <strong>'+this.app.user.name+"</strong></div>"),t.child(".user .logout").on("click",function(){this.registerLoader(),this.app.logout()},this),t.child(".user .my-prizes").on("click",function(){this.showMyPrizes()},this),e.updatePrizes()):t.child(".user").update("You are not logged in.")},updatePrizes:function(){var e=this,t=this.getDescription();e.app.api.call({path:e.app.entry_point.links.prizes,method:"get",params:{game_id:e.game.id}},function(n){if(!n.ok)return;var r=n.data;e.prizes=r.prizes;if(!r.prizes.length)return;t.child(".my-prizes-li").setStyle("display","")})},showYouWin:function(e){var t=this.getYouWinScreen(e);this.app.showModal(t),t.child(".bd").superScroll().update()},getYouWinScreen:function(e){if(!this.$youWin){this.$youWin=this.app.createModal({cls:"you-win page-window modal-window-full",cn:[{cls:"hd",cn:[{cls:"page-pic"},{cls:"content",cn:[{tag:"h2",cls:"title",html:this.lang.youWin}]}]},{cls:"bd",cn:[{cls:"scrollable",cn:[{tag:"h3",cls:"prize-name"},{cls:"prize-desc",cn:[{cls:"arrow-border"},{cls:"arrow"},{cls:"text"}]},{cls:"prize-code"},{cls:"body",cn:[{tag:"div",cls:"message",html:""}]},{cls:"redemption",cn:[{cls:"security",cn:[{cls:"text",html:"Security Image"},{cls:"image"},{cls:"time"}]}]},{cls:"prize-screen",cn:[{tag:"h2",cls:"code"},{tag:"h3",cls:"time"},{tag:"p",cls:"description"},{tag:"p",cls:"expiration"}]}]}]},{cls:"ft",cn:[{cls:"ft-padding",cn:[{cls:"sharebox",cn:[{tag:"label",cn:[{tag:"input",type:"checkbox",name:"share",checked:"checked"},{tag:"span",html:"Share this win with your friends."}]}]},{cls:"buttons",cn:[{tag:"a",href:"#",cls:"btn btn-close",html:"Okay"}]}]}]}]}),this.app.fireEvent("filter_you_win",this.$description,this),this.$youWin.child(".ft").on("click",this.onYouWinButtonClick,this),this.squareImage(this.$youWin.child(".page-pic"),this.page.image);var t=this.$youWin,n=this.$youWin.child(".bd"),r=this.$youWin.child(".ft"),i=this.$youWin.child(".prize-desc");i.setVisibilityMode(Ext.Element.DISPLAY),this.$youWin.child(".prize-name").on("click",function(){if(d._screen)return;i.toggle()}),n.superScroll({horizontal:!1,fixSize:function(){var e=t.getHeight(!0),i=t.getXY()[1],s=n.getXY()[1],o=r.getHeight()-4;n.setHeight(e-(s-i)-o)}})}if(!e)return this.$youWin;this.$youWin.prize=e,this.$youWin.removeClass("prize-active"),this.$youWin.removeClass("prize-redeemed"),this.$youWin.removeClass("prize-expired"),this.$youWin.addClass("prize-"+e.state),this.$youWin[e.shared?"addClass":"removeClass"]("prize-shared"),this.$youWin[e.is_email||e.is_pdf?"addClass":"removeClass"]("prize-is-email"),this.$youWin[e.is_barcode?"addClass":"removeClass"]("prize-is-barcode"),this.$youWin[!e.is_barcode&&!e.is_email&&!e.is_pdf?"addClass":"removeClass"]("prize-is-user-redeemable"),this.$youWin.child(".hd .title").update(this.lang.youWin),this.$youWin.child(".prize-name").update(e.name),this.$youWin.child(".prize-desc .text").update("<strong>"+this.lang.prizeDetails+":</strong> "+e.description),this.$youWin.child(".prize-desc").hide(),this.$youWin.child(".prize-code").update('<span class="code-label">CODE: </span>'+e.code);var s=this.$youWin.child(".message"),n=this.$youWin.child(".bd"),r=this.$youWin.child(".ft");if(e.address_required){if(!this.app.addressForm){var o={ship_name:"Ship-to Name",address1:"Address",address2:"Apt / Suite",city:"City",state:"State",zip:"Zip"},u=[],a=["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];for(var f in o)if(o.hasOwnProperty(f)){var l="";if(f=="state"){var c=[];for(var h=0;h<a.length;h++)c[c.length]='<option value="'+a[h]+'">'+a[h]+"</option>";l='<select name="'+f+'">'+c.join("\n")+"</select>"}else l='<input type="text" name="'+f+'" />';u[u.length]='<label class="'+f+'">'+"<span>"+l+"<em>"+o[f]+"</em></span>"+"</label>"}this.app.addressForm=Ext.fly(document.body).insertFirst({cls:"address-form-ct",html:['<div class="address-form-padding">','<div class="prize-details">','<h4><span style="font-size:.8em">'+this.lang.youWin+'</span><br /><span style="color:black;" class="prize-name"></span></h4>',"</div>","<form>",'<p class="address-message"></p>','<div class="address-form">',u.join("\n"),"</div>",'<div class="update-btn-ct">','<a href="javascript:;" class="btn btn-save">Update</a>',"</div>","</form>","</div>"].join("\n")}),this.app.addressForm.child(".address-form-padding").setStyle({width:this.app.width-40+"px"}),this.app.addressForm.setVisibilityMode(Ext.Element.DISPLAY),this.app.addressForm.hide()}var p=this.app.user.city?"Please update your shipping information so we can send you your prize.":"Please provide your shipping information so we can send you your prize.";this.app.addressForm.child(".address-message").update(p),this.app.addressForm.child(".prize-name").update(e.name),this.app.user.ship_name||(this.app.user.ship_name=this.app.user.name);for(var f in o)this.app.addressForm.child("[name="+f+"]").setValue(this.app.user[f]||"");s.update(['<div class="mailed-address"></div>'].join(""));var d=this,v=function(){if(d.app.user.city){var e=["<p>Your prize will be mailed to:</p><p>",d.app.user.ship_name,"<br />",d.app.user.address1];d.app.user.address2&&(e=e.concat([" ",d.app.user.address2])),e=e.concat(["<br />",d.app.user.city,", ",d.app.user.state," ",d.app.user.zip,"</p>"]),e=e.concat(["<p>",'<a class="btn btn-change">Update Address</a>',"</p>"]),s.child(".mailed-address").update(e.join("")),s.child(".btn-change").on("click",m)}},m=function(){function n(r){r.stopEvent();var i={};for(var s in o)i[s]=d.app.addressForm.child("[name="+s+"]").getValue();for(var s in i){if(/(address1|city|state|zip|ship_name)/.test(s)&&!i[s]){alert(o[s]+" is required.");return}if("zip"==s&&!/^\d{5}/.test(i[s])){alert(o[s]+" is invalid.");return}}e.update("Updating..."),d.app.api.call({path:d.app.entry_point.links.user,method:"post",params:i},function(r){e.update("Update");if(!r.data.success){alert("An unexpected error occurred. Please try saving again.");return}d.app.setUser(r.data.user),v(),d.app.addressForm.hide(),d.app.$ct.show(),d.$youWin.child(".bd").superScroll().update(),e.un("click",n,d),t.un("submit",n),d.app.scrollToTop()})}d.app.addressForm.show(),d.app.$ct.hide();var e=d.app.addressForm.child(".btn-save"),t=d.app.addressForm.child("form");e.on("click",n),t.on("submit",n)};this.app.user.city?v():m()}else if(e.is_pdf||e.is_email||this.app.email_only){s.update([String.format(this.lang.sentEmail,this.app.user.email),'<p class="email-link"><a href="javascript:;">Change Email Address?</a></p>','<div class="email-form">','<div><input class="email-field" placeholder="Enter your email" name="email" /></div>','<div class="buttons"><a href="javascript:;" class="btn btn-cancel">Cancel</a><a href="javascript:;" class="btn btn-change">Change</a></div>',"</div>"].join("\n"));var g=s.child(".email-link"),y=s.child(".email-form");g.setVisibilityMode(Ext.Element.DISPLAY),y.setVisibilityMode(Ext.Element.DISPLAY),y.hide(),y.child("input").dom.value=this.app.user.email,g.child("a").on("click",function(e){e.stopEvent(),g.hide(),y.show(),n.superScroll().update()},this);var b=y.child(".btn-change"),w=y.child(".btn-cancel"),E=!1;b.on("click",function(t){t.stopEvent();if(E)return;E=!0,w.setStyle("opacity",.6),b.setStyle("opacity",.6).update("Saving...");var r=this,i=y.child("input").dom.value;this.app.api.call({path:this.app.entry_point.links.user,method:"post",params:{email:i}},function(t){if(!t.data.success){alert(t.data.message),E=!1,w.setStyle("opacity",1),b.setStyle("opacity",1).update("Change");return}r.app.user.email=i,r.app.api.call({path:e.links.resend,method:"post"},function(e){E=!1,n.child(".user-email").update(y.child("input").dom.value),w.setStyle("opacity",1),b.setStyle("opacity",1).update("Change"),y.hide(),g.show(),n.superScroll().update()})})},this),w.on("click",function(e){e.stopEvent();if(E)return;y.child("input").dom.value=this.app.user.email,y.hide(),g.show(),n.superScroll().update()},this)}else if(!e.is_barcode)switch(e.state){case"active":var S=e.wrapper_message.indexOf(":"),x=e.wrapper_message.indexOf("This prize expires"),T=[e.wrapper_message.substr(0,S)];T.push("<b>"+e.wrapper_message.substr(S,x-S)+"</b><br /><br />"),T.push('<div class="expires">'+e.wrapper_message.substr(x).replace(/This prize expires/i,'<span class="label">Expires:</span>')+"</div>"),s.update(T.join(""));break;case"redeemed":var N=Bozuko.util.ISODate.convert(e.redeemed_timestamp);s.update("This prize was redeemed "+N.format("fullDate")+" at "+N.format("shortTime")+".");break;case"expired":var N=Bozuko.util.ISODate.convert(e.expiration_timestamp);s.update("This prize expired "+N.format("fullDate")+" at "+N.format("shortTime")+".")}return!(e.address_required||e.is_pdf||e.is_email||this.app.email_only)&&e.state=="active"?this.addYouWinFooterButtons({text:"Save",cls:"btn-save"},{text:"Redeem",cls:"btn-redeem"}):e.is_screen?this.addYouWinFooterButtons({text:"OK",cls:"btn-save"},{text:"View",cls:"btn-open"}):this.addYouWinFooterButtons({text:"OK",cls:"btn-close"}),this.$youWin.child(".bd").superScroll().update(),this.$youWin},addYouWinFooterButtons:function(){var e=this.getYouWinScreen().child(".ft .buttons");e.update("");if(!arguments.length)return;var t=arguments.length,n,r,i=[];e.dom.className="buttons",e.addClass("buttons-"+t);for(n=0;n<arguments.length;n++)r=arguments[n],i.push('<div class="button-wrap"><a class="btn btn-'+(n+1)+" "+r.cls+'" href="#">'+r.text+"</a></div>");e.update(i.join(""))},onYouWinButtonClick:function(e){var t=e.getTarget("a.btn");if(!t||Ext.fly(t).hasClass("btn-disabled"))return;var n=this,r=this.getYouWinScreen(),i=r.child(".bd"),s=r.child(".ft"),o=i.child(".body"),u=i.child(".redemption"),a=i.child(".prize-screen"),f=u.child(".time"),l=a.child(".time"),c=r.prize;t=Ext.get(t),!c.shared&&c.links.share&&r.child("input[name=share]").dom.checked&&(this.app.api.call({path:c.links.share,params:{message:""},method:"post"},function(e){c.shared=!0,n.updatePrizes()}),r.addClass("prize-shared"),i.superScroll().update());if(t.hasClass("btn-save"))this.closeYouWin();else if(t.hasClass("btn-redeem")&&!c.redeemed){if(!confirm("Please make sure you are with someone qualified to review the prize screen."))return;r.select(".btn").addClass("btn-disabled");var h={};n.app.useDefaultLoader(),n.app.showLoading(),n.app.api.call({path:c.links.redeem,method:"post"},function(e){n.app.hideLoading(),n.app.showModal(r);if(!e.ok){r.select(".btn").removeClass("btn-disabled");return}for(var t in e.data.prize)c[t]=e.data.prize[t];o.setStyle({display:"none"}),u.setStyle({display:"block"}),u.child(".image").update(""),u.child(".image").createChild({tag:"img",src:e.data.security_image});var s=Date.now(),a=0,l=function(){f.update((new Date).format("hh:MM:ss TT"));var e=Date.now()-s;if(e>24e4){var t=a++%2?"red":"white";f.setStyle({color:t})}e>3e5&&n.closeYouWin()};l(),n._redemptionClock=setInterval(l,1e3),n._redeeming=!0,n.addYouWinFooterButtons({text:"OK",cls:"btn-close"}),i.superScroll().update()})}else if(t.hasClass("btn-open")){r.select(".btn").addClass("btn-disabled"),n.app.showModal(r),o.setStyle({display:"none"}),a.setStyle({display:"block"}),a.child(".code").update(c.code);if(c.hide_expiration||!c.expiration_timestamp)a.child(".expiration").hide();else{var f=Bozuko.util.ISODate.convert(c.expiration_timestamp),p=+f>Date.now()?"Expires ":"Expired ";+f?(a.child(".expiration").update(p+" "+f.format("fullDate")+" at "+f.format("shortTime")),a.child(".expiration").show()):a.child(".expiration").hide()}a.child(".description").update(c.description||"");var d=function(){l.update((new Date).format("hh:MM:ss TT"))};d(),n._redemptionClock=setInterval(d,1e3),n._screen=Date.now(),n.addYouWinFooterButtons({text:"OK",cls:"btn-close"}),i.superScroll().update()}else{if(this._screen&&Date.now()-this._screen<1e3)return;this.closeYouWin()}},closeYouWin:function(){this._showingYouWin=!1,this._redeeming&&(clearInterval(this._redemptionClock),this.getYouWinScreen().child(".bd .body").setStyle({display:"block"}),this.getYouWinScreen().child(".bd .redemption").setStyle({display:"none"}),this._redeeming=!1),this._screen&&(this.getYouWinScreen().child(".bd .body").setStyle({display:"block"}),this.getYouWinScreen().child(".bd .prize-screen").setStyle({display:"none"}),clearInterval(this._clock),this._screen=!1);switch(this._youWinReturn){case"game":this.app.unmask(),this.next();break;default:this.showMyPrizes()}},showMyPrizes:function(){this.updateMyPrizesScreen(),this.app.showModal(this.getMyPrizesScreen())},updateMyPrizesScreen:function(){var e=this,t=this.getMyPrizesScreen(),n=t.child(".prize-list");n.update("");var r=n.createChild({tag:"ul"});Ext.each(this.prizes,function(t,n){var i=Bozuko.util.ISODate.convert(t.win_time),s=r.createChild({tag:"li",cls:"active",cn:[{cls:"prize-body",cn:[{cls:"left",cn:[{cls:"name",cn:[{tag:"span",html:t.name}]},{cls:"meta",cn:[{tag:"span",html:"Won: "+i.format("mediumDate")}]}]},{cls:"right link"}]}]});e.app.fireEvent("filter_prize",s,e),s.child(".link").on("click",function(){e._youWinReturn="prizes",e.showYouWin(e.prizes[n])})}),this.app.fireEvent("filter_prize_list",r,e)},getMyPrizesScreen:function(){if(!this.$myPrizes){this.$myPrizes=this.app.createModal({cls:"my-prizes page-window modal-window-full",cn:[{cls:"top-bar",html:'<a href="javascript:;" class="back-to-game">&larr; '+this.lang.backToGame+"</a>"},{cls:"hd",cn:[{cls:"page-pic"},{cls:"content",cn:[{tag:"h3",html:this.lang.myPrizes}]}]},{cls:"bd",cn:[{cls:"scrollable prize-list"}]}]}),this.app.fireEvent("filter_my_prizes",this.$myPrizes,this),this.$myPrizes.child(".back-to-game").on("click",this.showDescription,this),this.squareImage(this.$myPrizes.child(".page-pic"),this.app.user.image);var e=this.$myPrizes.show,t=this;this.$myPrizes.show=function(){e.apply(this,arguments);var n=t.$myPrizes.child(".bd");t.$myPrizes.child(".bd").superScroll({horizontal:!1,fixSize:function(){n.setHeight(t.$myPrizes.getHeight(!0)+4-(n.getXY()[1]-t.$myPrizes.getXY()[1]))}})}}return this.$myPrizes},onAfterWin:function(){var e=this;e.showYouWin(e.game_result.prize),e._youWinReturn="game"},getLoader:function(){if(!this._loader){var e=this.getDescription(),t=new Bozuko.client.Loader(e);t.on("showloading",function(){this.app.showModal(t.$el),t.getEl().child(".actions").addClass("loading"),t.$el.child(".bd").superScroll().update()},this),t.on("hideloading",function(){t.getEl().child(".actions").removeClass("loading"),t.$el.child(".bd").superScroll().update()},this),this._loader=t}return this._loader},registerLoader:function(){this.app.registerLoader(this.getLoader())},squareImage:function(e,t){var n=new Image,r=e.getWidth(),i=e.getHeight();n.onload=function(){var t=Ext.fly(n),s=n.width,o=n.height;if(s>o){var u=i/o,a=u*s-r;t.setStyle({top:0,width:s*u+"px",height:o*u+"px",left:-a/2+"px"})}else{var u=r/s,a=u*o-i;t.setStyle({top:-a/2,width:s*u+"px",height:o*u+"px",left:"0px"})}e.appendChild(n)},n.src=t},showDescription:function(){this.app.showModal(this.getDescription()),this.getDescription().child(".bd").superScroll().update()},enter:function(){function t(t,n,r){e.app.api.call({path:e.state.links.game_entry,params:{ll:t+","+n,accuracy:r},method:"post"},function(t){e.app.hideLoading();if(!t.ok){e.showDescription(),e.updateActionFromState();return}Ext.each(t.data,function(n){if(n.game_id==e.game.id){e.setState(n),e.state.user_tokens?e.app.useDefaultLoader():(this._playing=!1,e.registerLoader()),e.fireEvent("enter",t.data);return}})})}var e=this;e.app.showLoading(this.lang.loading.entry);if(e.game.entry_method.use_location){var n=function(){navigator.geolocation.getCurrentPosition(function(e){return t(e.coords.latitude,e.coords.longitude,e.coords.accuracy)},function(){return t(0,0,0)})};return e.game.entry_method.type.match(/checkin/)?FB.api("/me/permissions",function(e){return e.data[0].publish_checkins?n():window.top.location="/client/login?redirect="+encodeURIComponent(window.location.pathname)}):n()}return t(0,0,0)},result:function(e){var t=this;this.fireEvent("beforeresult"),t.app.api.call({path:t.state.links.game_result,method:"post"},function(n){t.fireEvent("afterresult");if(!n.ok){t.updateActionFromState(),t.showDescription();return}n.data.win&&t.updatePrizes(),t.game_result=n.data,t.setState(n.data.game_state),t.state.user_tokens?t.app.useDefaultLoader():(t._playing=!1,t.registerLoader()),t.updateCache("game_result"),t.fireEvent("result",n.data),e&&typeof e=="function"&&e()})},setState:function(e){if(!e)return;var t=this;this._updateTimeout&&clearTimeout(this._updateTimeout),this.state=e,e.next_enter_time_ms&&e.next_enter_time_ms>0&&(this._updateTimeout=setTimeout(function(){t.updateState()},e.next_enter_time_ms)),this.fireEvent("statechange",e),this.updateCache("state"),this.updateActionFromState()},getCache:function(e){return this.app.cache(e+"_"+this.game.id)},updateCache:function(e,t){return t||(t=this[e]),this.app.cache(e+"_"+this.game.id,t)},clearCache:function(e){this.app.cache(e+"_"+this.game.id,!1)}}),Ext.namespace("Bozuko.client.game"),function(){var e=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),t=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}();Bozuko.client.game.Slots=Ext.extend(Bozuko.client.game.Abstract,{autoPlay:!1,frameRate:10,baseWidth:640,baseHeight:830,wheelXPositions:[34,230,425],wheelOrders:[],wheelIcons:[],wheelStrips:[],wheelScrolls:[],stripNum:7,spinTime:5,spinStagger:.7,iconPadding:3,frame:"https://bozuko.s3.amazonaws.com/public/slots/assets/slots-frame-large.png",resultImages:{winBg:"/images/client/scratch/scratchYouWinBg.png",winTxt:"/images/client/scratch/scratchYouWinTxt.png",winStars:"/images/client/scratch/scratchStarsBg.png",loseBg:"/images/client/scratch/scratchYouLoseBg.png",loseTxt:"/images/client/scratch/scratchYouLoseTxt.png",playAgainBg:"/images/client/scratch/scratchYouLosePlayAgainBg.png",playAgainTxt:"/images/client/scratch/scratchYouLosePlayAgainTxt.png",freePlayTxt:"/images/client/scratch/scratchBonusTixTxt.png",freePlayBg:"/images/client/scratch/scratchYouWinBg.png",freePlayStars:"/images/client/scratch/scratchStarsBg.png"},lang:Ext.apply(Bozuko.client.game.Abstract.prototype.lang,{loading:{entry:"Loading...",result:"Spinning..."},instructions:"Spin to Win!",creditsLabel:"Credits",gameDetails:"Game Details"}),constructor:function(){Bozuko.client.game.Slots.superclass.constructor.apply(this,arguments),this.addEvents({spinstart:!0,spinstop:!0}),this.isIos=window.navigator.userAgent.match(/i(phone|pad|pod)/i),this.scale=this.width/this.baseWidth,this.useRetina=this.isIos&&window.devicePixelRatio>1||this.width>this.baseWidth,this.useTransitions=Modernizr.csstransitions,this.useTransforms=Modernizr.csstransforms,this.on("enter",this.onEnter,this),this.on("result",this.onResult,this),this.on("statechange",this.onStateChange,this),this.on("spinstart",this.onSpinStart,this),this.on("spinstop",this.onSpinStop,this),this.on("beforeresult",this.onBeforeResult,this),this.on("afterresult",this.onAfterResult,this),this.blinkingCounterOpts={duration:.2},window.slots=this,this.spinning=!1,this.init()},init:function(){var e=this,t=this.game.config.icons,n=this.game.config.theme;this.icons=t,this.game.config.theme&&this.game.config.theme.options&&this.game.config.theme.options.slotsFrame&&(this.frame=this.game.config.theme.options.slotsFrame),e.addImage("frame",this.frame);for(var r=0;r<t.length;r++)e.addImage(t[r],n.base+"/"+n.icons[t[r]]);var i=["win","lose","freePlay","playAgain"];if(this.game.config.theme.options)for(var r=0;r<i.length;r++){var s=i[r];this.game.config.theme.options[s+"Custom"]&&(delete this.resultImages[s+"Txt"],delete this.resultImages[s+"Bg"],delete this.resultImages[s+"Stars"],this.resultImages[s+"Custom"]=this.game.config.theme.options[s+"Custom"])}for(var r in this.resultImages)e.addImage(r,this.resultImages[r]);e.loadImages(function(){}),this.renderTo&&this.render(this.renderTo)},render:function(e){var t=this,n=this.width/this.baseWidth;if(this.rendered)return;if(!this.isReady()){this.on("ready",function(){t.render(e)});return}this.$parent=e,this.$ct=this.$parent.createChild({tag:"div",cls:"game slot-machine"}),this.$ct.setStyle({width:this.width+"px",height:this.height+"px"}),this.$frame=this.$ct.createChild({tag:"img",cls:"frame",src:this.image("frame").src}),this.$spinButton=this.$ct.createChild({cls:"spin-button",html:'<span class="center-middle-text">Spin</span>'}),this.$spinButton.dom.onclick=this.onSpinButtonClick.createDelegate(this),this.$creditsCounter=this.$ct.createChild({cls:"credits-counter",cn:[{cls:"center-middle-text",html:this.game.game_state.user_tokens||"0"}]}),this.$creditsLabel=this.$ct.createChild({cls:"credits-label",cn:[{cls:"center-middle-text",html:this.lang.creditsLabel}]}),this.$infoLink=this.$ct.createChild({tag:"div",cls:"game-details-link",html:this.lang.gameDetails}),this.$infoLink.on("click",function(){!this.spinning&&!this.noSpin&&this.showDescription()},this),this.game.config.theme.options.slotsHideLogo||(this.$pagePic=this.$ct.createChild({cls:"page-pic",cn:[{tag:"img",src:this.page.image}]})),this.$wheels=[];for(var r=0;r<this.wheelXPositions.length;r++){var i=this.wheelXPositions[r]/this.baseWidth,s=this.$wheels[this.$wheels.length]=this.$ct.createChild({cls:"wheel",style:{left:i*100+"%"}}),o=s.createChild({cls:"wrap"}),u=this.wheelScrolls[r]=o.createChild({cls:"scroll"}),a=this.icons.slice();this.wheelOrders[r]={},this.wheelIcons[r]={};var f=Math.min(this.image(this.icons[0]).height,u.getWidth()),l=f+this.iconPadding*2;this.wheelStrips[r]=[];var c=this.wheelStrips[r][0]=u.createChild({cls:"strip"});while(a.length){var h=a.splice(Math.floor(Math.random()*a.length),1)[0];c.createChild({cls:"icon-ct",style:{padding:this.iconPadding+"px 0","text-align":"center"},cn:[{style:{height:f+"px"},tag:"img",src:this.image(h).src}]}),this.wheelOrders[r][h]=a.length,this.wheelIcons[r][a.length]=h}u.createChild({cls:"first-icon icon-ct",style:{padding:this.iconPadding+"px 0","text-align":"center"},cn:[{tag:"img",src:this.image(this.wheelIcons[r][this.icons.length-1]).src,style:{height:f+"px"}}]}),u.createChild({cls:"last-icon icon-ct",style:{padding:this.iconPadding+"px 0","text-align":"center"},cn:[{tag:"img",src:this.image(this.wheelIcons[r][0]).src,style:{height:f+"px"}}]}),this.wheelStrips[r][0]=c,this.iconHeight||(this.iconHeight=l),this.stripHeight||(this.stripHeight=this.iconHeight*this.icons.length),this.iconOffset||(this.iconOffset=(this.iconHeight*3-s.getHeight())/2);var p=this.iconOffset-t.iconHeight;this.useTransitions&&this.useTransforms?u.dom.style[Modernizr.prefixed("transform")]="translate3d(0, "+p+"px, 0)":u.dom.style.bottom=-p+"px";for(var d=1;d<this.stripNum;d++){var v=Ext.get(c.dom.cloneNode(!0));v.dom.removeAttribute("id"),u.dom.appendChild(v.dom),this.wheelStrips[r][d]=v}}this.$animationsCt=this.$ct.createChild({cls:"animations"}),this.$animationsCt.setVisibilityMode(Ext.Element.DISPLAY),this.$animationsCt.hide(),this.$animations={},this._createAnimationDiv("lose"),this._createAnimationDiv("playAgain"),this._createAnimationDiv("freePlay",!0),this._createAnimationDiv("win",!0),this.reset(),this.rendered=!0,this.fireEvent("render",this);var t=this},_createAnimationDiv:function(e,t){var n=this;n.$animations[e]=n.$animationsCt.createChild({cls:"animation "+e}),n.$animations[e].setVisibilityMode(Ext.Element.DISPLAY),n.image(e+"Custom")?(n.image(e+"Custom").className="custom",n.$animations[e].dom.appendChild(n.image(e+"Custom"))):(n.image(e+"Bg").className="bg",n.$animations[e].dom.appendChild(n.image(e+"Bg")),n.image(e+"Txt").className="txt",n.$animations[e].dom.appendChild(n.image(e+"Txt")),t&&(n.image(e+"Stars").className="stars",n.$animations[e].dom.appendChild(n.image(e+"Stars"))))},updateCredits:function(e){if(this._creditsWaitForSpinStop)return;e===undefined&&(e=this.state.user_tokens);var t=this.$creditsCounter.child(".center-middle-text"),n=t.dom.innerHTML;if(n!=e){t.update(e?e:"0");var r=0,i=this;t.stopFx();var s=this.blinkingCounterOpts.callback=function(){if(++r>11){i.blinkingCounterOpts.callback=null,t.isVisible()||t.show(i.blinkingCounterOpts);return}t.toggle(i.blinkingCounterOpts)};s()}},spin:function(e){if(this.spinning)return;this.spinning=!0,this.fireEvent("spinstart",this);for(var t=0;t<e.length;t++){var n=this.stripHeight*(this.stripNum-2)+this.iconHeight*this.wheelOrders[t][e[t]]+this.iconOffset-this.iconHeight,r=this.spinTime+this.spinStagger*t,i=this,s=0,o=function(t){return function(){i.resetWheel(t,e[t]),i.useTransitions&&(i.wheelScrolls[t].dom.removeEventListener("transitionend",o),i.wheelScrolls[t].dom.removeEventListener("webkitTransitionEnd",o),i.wheelScrolls[t].dom.removeEventListener("OTransitionEnd",o)),++s==e.length&&(i.spinning=!1,i.fireEvent("spinstop"))}}(t);this.useTransitions?(this.wheelScrolls[t].addClass("scroll-transition"),this.wheelScrolls[t].dom.style[Modernizr.prefixed("transitionDuration")]=r+"s",this.wheelScrolls[t].dom.addEventListener("transitionend",o,!1),this.wheelScrolls[t].dom.addEventListener("webkitTransitionEnd",o,!1),this.wheelScrolls[t].dom.addEventListener("OTransitionEnd",o,!1),this.useTransforms?this.wheelScrolls[t].dom.style[Modernizr.prefixed("transform")]="translate3d(0, "+n+"px, 0)":this.wheelScrolls[t].dom.style.bottom=-n+"px"):this.wheelScrolls[t].animate({bottom:{to:-n}},r,o)}},showAnimation:function(e,t,n){if(this.resultAnimating)return;this.resultAnimating=!0;var r=this;this.clearCache("game_result"),this.clearCache("state"),this.$animationsCt.select(".animation").removeClass("animate"),this.$animationsCt.show();var i=this.$animations[e];i.addClass("animate");var s,o;if(!Modernizr.cssanimations){var u=!0,a=!1,f=[.8,1],l=i.getXY(),c=[i.getWidth(),i.getHeight()],h;o=function(){a=!0,h.anim&&h.anim.isAnimating&&h.anim.isAnimating()&&h.anim.stop(),i.setStyle({top:0,left:0,bottom:0,right:0,width:"100%",height:"100%"})},i.setStyle({width:"auto",height:"auto"});var p=function(){if(a)return;var e=Math.round,t={from:e(c[0]*f[u?0:1]),to:e(c[0]*f[u?1:0])},n={from:e(c[1]*f[u?0:1]),to:e(c[1]*f[u?1:0])},r={from:e((c[0]-t.from)/2),to:e((c[0]-t.to)/2)},s={from:e((c[1]-n.from)/2),to:e((c[1]-n.to)/2)},o={top:r,left:s,right:r,bottom:s};u=!u,i.anim(o,h)};h={duration:.35,callback:p,easing:"easeOut"},p()}var d=!1,v=function(){o&&o(),r.resultAnimating=!1,r.$animationsCt.un("click",m);if(d)return;d=!0,r.$animations[e].removeClass("animate"),r.$animationsCt.hide(),t?t.apply(n||r):r.next()},m=function(e){e.stopEvent(),v()};setTimeout(function(){r.$animationsCt.on("click",m)},500),setTimeout(v,5e3)},resetIcons:function(e){for(var t=0;t<e.length;t++)this.resetWheel(t,e[t])},resetWheel:function(e,t){this.wheelScrolls[e].removeClass("scroll-transition"),this.useTransitions&&(this.wheelScrolls[e].dom.style[Modernizr.prefixed("transitionDuration")]="0s");var n=this.iconHeight*this.wheelOrders[e][t]+this.iconOffset-this.iconHeight;this.useTransitions&&this.useTransforms?this.wheelScrolls[e].dom.style[Modernizr.prefixed("transform")]="translate3d(0, "+n+"px, 0)":this.wheelScrolls[e].dom.style.bottom=-n+"px"},pause:function(){if(this._animationImminent)return;var e=this.getDescription().child(".actions .action"),t=[];while(e.dom.childNodes.length)t.push(e.dom.childNodes[0]),e.dom.removeChild(e.dom.childNodes[0]);this.updateAction('<a href="javascript:;" class="button">Go back to the ticket &raquo;</a>'),this.getDescription().child(".actions .button").on("click",function(){this.app.unmask(),Ext.each(t,function(t){e.dom.appendChild(t)})},this),this.showDescription()},onStateChange:function(e){this.updateCredits()},onEnter:function(e){this.app.hideModal(),this.updateCredits()},onSpinButtonClick:function(){if(this.spinning||this.noSpin)return;if(this.state.user_tokens==0){this.showDescription();return}this.updateCredits(this.state.user_tokens-1),this._creditsWaitForSpinStop=!0,this.result()},onSpinStart:function(){this.noSpin=!0,this.stopBlinkingSpinButton(),this.$spinButton.addClass("spin-button-disabled")},onSpinStop:function(){var e=this,t=function(){e.noSpin=!1};this.$spinButton.removeClass("spin-button-disabled"),this._creditsWaitForSpinStop=!1;if(this.game_result.free_play)this.updateCredits(),this.showAnimation("freePlay",function(){t(),e.blinkSpinButton()});else if(this.game_result.win)this.fireEvent("displaywin",this.game_result,this),this.showAnimation("win",function(){this.onAfterWin(),t(),e.blinkSpinButton()},this);else if(!this.state.user_tokens){var e=this;this.showAnimation("lose",function(){t(),e.showDescription()})}else this.showAnimation("playAgain",function(){t(),e.blinkSpinButton()})},blinkSpinButton:function(){var e=this,t=0;this.blinkingSpinButton&&clearInterval(this.blinkingSpinButton),this.blinkingSpinButton=setInterval(function(){return t++>10?e.stopBlinkingSpinButton():e.$spinButton.toggleClass("spin-button-blink")},300)},stopBlinkingSpinButton:function(){clearInterval(this.blinkingSpinButton),this.$spinButton.removeClass("spin-button-blink")},onBeforeResult:function(){this.noSpin=!0},onAfterResult:function(){this.noSpin=!1},onResult:function(e){this.loaded=!0;var t=this.state.user_tokens+(e.free_play?0:1);this.spin(e.result)},reset:function(){}})}(),Ext.namespace("Bozuko.client"),Bozuko.client.App=Ext.extend(Ext.util.Observable,{dimensions:{x:320,y:415},constructor:function(e){function n(){var e=t.windowHeight||window.innerHeight||document.documentElement.clientHeight;t.stylesheet.rule("body",{"min-height":e+"px"});if(e>t.height){var n=(e-t.height)/2;t.stylesheet.rule("body",{"min-height":e-n+"px"}),Ext.fly(t.ct).setStyle({"padding-top":n+"px","padding-bottom":n+"px"})}t.scrollToTop()}var t=this;this.user=null,this.userState="loading",this.stopped=!1,this.currentView="start",this._loading=!1,this.config=e||{},Ext.apply(this,e),this.ct=this.config.renderTo||document.body,this.$ct=Ext.get(this.ct),this.$ct.setVisibilityMode(Ext.Element.DISPLAY),this.api=new Bozuko.client.lib.Api,this.api.on("failure",function(e){e.data&&e.data.message&&(alert(e.data.message),t.game&&t.game.updateActionFromState())}),this.createElements(),setTimeout(function(){t.scrollToTop()},300),this.addEvents({pagedata:!0,user:!0,nouser:!0,logout:!0}),Bozuko.client.App.superclass.constructor.call(this,e),Bozuko.client.App.Events.fireEvent("construct",this,e),this.showLoading("Loading..."),this.on("pagedata",function(e){t.updateBranding()});if(!this.validPath())return;e.facebook_tab?this.width=420:this.width=Math.min(520,Math.max(this.config.width||Math.min(window.innerWidth||document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight),320)),this.height=this.width/this.dimensions.x*this.dimensions.y,this.stylesheet=Bozuko.client.util.Stylesheet.create("app"),this.stylesheet.rule(".modal-window",{"max-height":this.height-30-6+"px"}),this.stylesheet.rule(".modal-window-full",{"min-height":this.height-30-6+"px"}),Modernizr.touch&&!window.navigator.userAgent.match(/i(pad|pod|phone)/i)&&this.stylesheet.rule("body",{width:this.width+"px"}),Ext.get(document.body).setStyle("font-size",13*this.width/this.dimensions.x+"px"),Ext.get(this.ct).setWidth(this.width),this.startFromPath(),this.initFacebook(),e.facebook_tab?(FB.Canvas.setSize({height:this.height+100}),t.windowHeight=this.height+100,setTimeout(n,200)):setTimeout(n,200),this.on("user",function(){this.userState="user"},this),this.on("nouser",function(){this.userState="nouser"})},createElements:function(){try{var e=document.createElement("canvas");e.width=e.height=1,e.getContext("experimental-webgl"),e.style.position="absolute",e.style.top="-100px",e.style.left="-100px",document.body.appendChild(e)}catch(t){}this.$body=Ext.get(this.ct).createChild({cls:"app"}),this.facebook_tab&&(this.$poweredBy=Ext.get(this.ct).createChild({cls:"bozuko-powered",style:"display: none",tag:"a",target:"_blank",href:"https://bozuko.com"})),this.$mask=this.$body.createChild({cls:"mask"}),this.$mask.on("click",function(e){e.stopEvent()}),this.$modal=this.$body.createChild({cls:"modal"}),this.$loading=this.createModal({cls:"loading-mask",cn:[{cls:"bg",cn:[{tag:"img",cls:"spinner",src:"/images/client/loading.gif?v2"}]}]});if(Modernizr.cssanimations){var n=this.$loading.child("img");n.dom.src="/images/client/spinner2.png?v2",n.addClass("animated-spinner")}var r=new Bozuko.client.Loader(this.$loading);r.on("showloading",function(){this.showModal(r.$el)},this),r.on("hideloading",function(){this.hideModal()},this),this._defaultLoader=r,this.useDefaultLoader(),this.$message=this.createModal({cls:"message",cn:[{tag:"p",cn:[{tag:"span",cls:"text",html:""}]}]})},useDefaultLoader:function(){this.registerLoader(this._defaultLoader)},createModal:function(e){e.cls?e.cls+=" modal-window":e.cls="modal-window";var t=this.$modal.createChild(e);return t.setVisibilityMode(Ext.Element.DISPLAY),t},initFacebook:function(){var e=this,t="//"+(window.location.hostname+(~["",null,80,443].indexOf(window.location.port)?"":":"+window.location.port)+"/channel.html");try{FB.init({appId:Bozuko.client.App.facebookApp.id,status:!0,cookie:!0,oauth:!0,channelUrl:t}),FB.Canvas.setSize({height:this.height+100}),FB.Event.subscribe("auth.logout",function(){e.fireEvent("nouser")}),FB.Event.subscribe("auth.login",function(t){e.onFacebookLogin(t)})}catch(n){n.code===DOMException.QUOTA_EXCEEDED_ERR&&alert('This page will not work in private browsing mode. Please go to Settings > Safari and make sure "Private Browsing" is set to "off". Thanks!')}},logout:function(){this.user=!1,this.userState="nouser",this.fireEvent("nouser"),Bozuko.client.util.Cache.clear(),this.api.setToken(!1),FB.logout(),this.fireEvent("logout"),this.showLogin()},doFacebookLogin:function(){var e=this;e.showLoading("Contacting Facebook..."),FB.getLoginStatus(function(t){e.onFacebookLogin(t)})},onFacebookLogin:function(e){var t=this;e.authResponse?t.bozukoLogin(e.authResponse.accessToken,function(e,n){return t.stopped?!1:e||!n||n.success===!1?t.showLogin():t.onUserConnected()}):(t.fireEvent("nouser"),t.showLogin())},onUserConnected:function(){var e=this;if(this.currentView!=="game"){e.showMessage("Unsupported Path");return}if(!this.game){e.showMessage("Unsupported Game Type");return}e.showLoading("Loading Game..."),e.game.load(e.user)},bozukoLogin:function(e,t){var n=this;Ext.Ajax.request({method:"POST",url:"/client/fblogin?"+(new Date).getTime(),params:{token:e},success:function(e,r){try{var i=Ext.decode(e.responseText);if(i)return n.setUser(i),n.api.call(function(e){return n.entry_point=e.data,n.fireEvent("user"),t(null,i)})}catch(s){console.log(s)}return n.fireEvent("nouser"),t(new Error("No User"))},failure:function(e,r){return n.fireEvent("nouser"),t(new Error("No User"))}})},showLogin:function(){this.showLoading('Please login with Facebook to play <a href="#" class="facebook-login">Login With Facebook</a>');var e=this;this._loader.$el.child(".facebook-login").dom.onclick=function(){var t=navigator.userAgent.match(/i(phone|pad|pod)/i);t?window.top.location="/client/login?redirect="+encodeURIComponent(window.location.pathname):(FB.login(function(){},{scope:Bozuko.client.App.facebookApp.scope}),e.showLoading("Logging in..."))}},getBrandingElements:function(){return this.page?[{tag:"table",style:"margin: 0 auto",cn:[{tag:"tr",valign:"middle",cn:[{tag:"td",cn:[{tag:"img",src:this.page.image.replace("type=large","type=square"),style:"height: 50px; width: 50px; margin-right: 10px; vertical-align: middle;"}]},{tag:"td",cn:[{tag:"h4",html:this.page.name}]}]}]}]:[]},updateBranding:function(){Ext.select(".branding").update(""),Ext.select(".branding").createChild(this.getBrandingElements())},doLogin:function(){var e=this,t=navigator.userAgent.match(/i(phone|pad|pod)/i)&&!navigator.userAgent.match(/safari/i);t?window.top.location="/client/login?redirect="+encodeURIComponent(window.location.pathname):(FB.login(function(){},{scope:Bozuko.client.App.facebookApp.scope}),this.showLoading("Logging in..."))},setUser:function(e){this.user=e,this.api.setToken(e.token)},scrollToTop:function(){window.scrollTo(0,1)},mask:function(e){this.keepmask=e,this.$mask.show(),this.$modal.show()},unmask:function(e){if(this.keepmask&&!e)return;this.$mask.hide(),this.$modal.hide()},showLoading:function(e){this._loading=!0,this._loader.show(e)},hideLoading:function(){this._loading=!1,this._loader.hide()},showMessage:function(e){this.mask(),e&&this.$message.select(".text").update(e),this.showModal(this.$message)},hideMessage:function(e){this.hideModal()},showModal:function(e,t){if(this.stopped)return;this.mask(t),this.$modal.select(".modal-window").hide(),e.show(),this.fireEvent("showmodal")},hideModal:function(e){this.fireEvent("hidemodal"),this.unmask(e)},registerLoader:function(e){var t=this._loader;t&&e.setText(t.getText()),this._loader=e,this._loading&&this._loader.show()},startFromPath:function(){var e=this,t=Bozuko.client.App.path||"/";t.match(/^\/game\/.*/)?(this.currentView="game",this.openGame(t)):this.showMessage("Path Not Supported")},validPath:function(){var e=Bozuko.client.App.path||"/";return e.match(/^\/game\/.*/)},openGame:function(e){var t=this,n=this.api;n.call(e,function(e){if(!e.ok){t.showMessage("Error retreiving game"),t.stopped=!0;return}window.gameResponse=e,n.call({path:e.data.links.page},function(n){if(!n.ok){t.showMessage("Error retreiving page"),t.stopped=!0;return}var r=e.data.type,i=Bozuko.client.game[r.substr(0,1).toUpperCase()+r.substr(1)];if(!i){t.showMessage("Unsupported Game Type"),t.stopped=!0;return}t.page=n.data,t.fireEvent("pagedata",n.data,t),!t.page.nobranding&&t.$poweredBy&&t.$poweredBy.show(),t.game=new i({width:t.$body.getWidth(),height:t.$body.getWidth()/320*415,game:e.data,page:n.data,user:t.user,app:t,renderTo:t.$body}),t.doFacebookLogin()})})},cache:function(e,t){return t===undefined?Bozuko.client.util.Cache.get(e):t===!1?Bozuko.client.util.Cache.del(e):Bozuko.client.util.Cache.set(e,t)}}),Bozuko.client.Loader=Ext.extend(Ext.util.Observable,{constructor:function(e,t){this.$el=Ext.get(e),this.text="Loading...",Ext.apply(this,t),this.addEvents({showloading:!0,hideloading:!0}),Bozuko.client.Loader.superclass.constructor.call(this)},setText:function(e){return this.text=e,this.$el.select(".loading-text").update(e),this},getText:function(){return this.text},getEl:function(){return this.$el},show:function(e){return e&&this.setText(e),this.fireEvent("showloading",this),this},hide:function(){return this.fireEvent("hideloading",this),this}}),function(){var e=[];Bozuko.client.App.Events=new Ext.util.Observable,Bozuko.client.App.launch=function(t){Ext.onReady(function(){var n=e[e.length]=new Bozuko.client.App(t);Bozuko.client.App.Events.fireEvent("created",n)})},Bozuko.client.App.getInstances=function(){return e},Bozuko.client.App.getInstance=function(){return e[0]}}()